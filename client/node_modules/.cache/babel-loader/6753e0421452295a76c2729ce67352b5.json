{"ast":null,"code":"import Tone from \"tone\";\nexport default class Instrument {\n  constructor(id, oscType) {\n    this.updateInstrument = props => {\n      this.synth.oscillator.type = props.oscillator.type;\n      this.synth.envelope.attack = props.envelope.attack;\n      this.synth.envelope.decay = props.envelope.decay;\n      this.synth.envelope.sustain = props.envelope.sustain;\n      this.synth.envelope.release = props.envelope.release;\n      return this.synth;\n    };\n\n    this.activateInstrument = () => {\n      if (this.active) {\n        if (this.sequence) {\n          this.sequence.stop();\n        }\n      } else {\n        if (this.sequence) {\n          this.sequence.start();\n        }\n      }\n\n      this.active = !this.active;\n    };\n\n    this.updateSequence = notes => {\n      console.log(this.sequence);\n\n      if (notes.length !== 0) {\n        if (this.active && this.sequence) {\n          this.sequence.stop('');\n        }\n\n        this.sequence = new Tone.Part((time, note) => {\n          this.synth.triggerAttackRelease(note, \"8n\", time);\n        }, notes);\n        this.sequence.loop(true);\n\n        if (this.active) {\n          this.sequence.start(0);\n        }\n      }\n    };\n\n    this.id = id;\n    this.synth = new Tone.Synth(oscType).toMaster();\n    this.sequence = null;\n    this.active = false;\n  }\n\n}","map":{"version":3,"sources":["/home/fvrh/Documentos/week8/bbrss/src/BasicSynth.class.js"],"names":["Tone","Instrument","constructor","id","oscType","updateInstrument","props","synth","oscillator","type","envelope","attack","decay","sustain","release","activateInstrument","active","sequence","stop","start","updateSequence","notes","console","log","length","Part","time","note","triggerAttackRelease","loop","Synth","toMaster"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAEA,eAAe,MAAMC,UAAN,CAAiB;AAC9BC,EAAAA,WAAW,CAACC,EAAD,EAAKC,OAAL,EAAc;AAAA,SAOzBC,gBAPyB,GAONC,KAAK,IAAI;AAC1B,WAAKC,KAAL,CAAWC,UAAX,CAAsBC,IAAtB,GAA6BH,KAAK,CAACE,UAAN,CAAiBC,IAA9C;AACA,WAAKF,KAAL,CAAWG,QAAX,CAAoBC,MAApB,GAA6BL,KAAK,CAACI,QAAN,CAAeC,MAA5C;AACA,WAAKJ,KAAL,CAAWG,QAAX,CAAoBE,KAApB,GAA4BN,KAAK,CAACI,QAAN,CAAeE,KAA3C;AACA,WAAKL,KAAL,CAAWG,QAAX,CAAoBG,OAApB,GAA8BP,KAAK,CAACI,QAAN,CAAeG,OAA7C;AACA,WAAKN,KAAL,CAAWG,QAAX,CAAoBI,OAApB,GAA8BR,KAAK,CAACI,QAAN,CAAeI,OAA7C;AACA,aAAO,KAAKP,KAAZ;AACD,KAdwB;;AAAA,SAgBzBQ,kBAhByB,GAgBJ,MAAM;AACzB,UAAI,KAAKC,MAAT,EAAiB;AACf,YAAI,KAAKC,QAAT,EAAmB;AACjB,eAAKA,QAAL,CAAcC,IAAd;AACD;AACF,OAJD,MAIO;AACL,YAAI,KAAKD,QAAT,EAAmB;AACjB,eAAKA,QAAL,CAAcE,KAAd;AACD;AACF;;AACD,WAAKH,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD,KA3BwB;;AAAA,SA6BzBI,cA7ByB,GA6BRC,KAAK,IAAI;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKN,QAAjB;;AACA,UAAII,KAAK,CAACG,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAI,KAAKR,MAAL,IAAe,KAAKC,QAAxB,EAAkC;AAChC,eAAKA,QAAL,CAAcC,IAAd,CAAmB,EAAnB;AACD;;AAED,aAAKD,QAAL,GAAgB,IAAIjB,IAAI,CAACyB,IAAT,CAAc,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAC5C,eAAKpB,KAAL,CAAWqB,oBAAX,CAAgCD,IAAhC,EAAsC,IAAtC,EAA4CD,IAA5C;AACD,SAFe,EAEbL,KAFa,CAAhB;AAIA,aAAKJ,QAAL,CAAcY,IAAd,CAAmB,IAAnB;;AAEA,YAAI,KAAKb,MAAT,EAAiB;AACf,eAAKC,QAAL,CAAcE,KAAd,CAAoB,CAApB;AACD;AACF;AACF,KA9CwB;;AACvB,SAAKhB,EAAL,GAAUA,EAAV;AACA,SAAKI,KAAL,GAAa,IAAIP,IAAI,CAAC8B,KAAT,CAAe1B,OAAf,EAAwB2B,QAAxB,EAAb;AACA,SAAKd,QAAL,GAAgB,IAAhB;AACA,SAAKD,MAAL,GAAc,KAAd;AACD;;AAN6B","sourcesContent":["import Tone from \"tone\";\n\nexport default class Instrument {\n  constructor(id, oscType) {\n    this.id = id;\n    this.synth = new Tone.Synth(oscType).toMaster();\n    this.sequence = null;\n    this.active = false;\n  }\n\n  updateInstrument = props => {\n    this.synth.oscillator.type = props.oscillator.type;\n    this.synth.envelope.attack = props.envelope.attack;\n    this.synth.envelope.decay = props.envelope.decay;\n    this.synth.envelope.sustain = props.envelope.sustain;\n    this.synth.envelope.release = props.envelope.release;\n    return this.synth;\n  };\n\n  activateInstrument = () => {\n    if (this.active) {\n      if (this.sequence) {\n        this.sequence.stop();\n      }\n    } else {\n      if (this.sequence) {\n        this.sequence.start();\n      }\n    }\n    this.active = !this.active;\n  };\n\n  updateSequence = notes => {\n    console.log(this.sequence);\n    if (notes.length !== 0) {\n      if (this.active && this.sequence) {\n        this.sequence.stop('');\n      }\n\n      this.sequence = new Tone.Part((time, note) => {\n        this.synth.triggerAttackRelease(note, \"8n\", time);\n      }, notes);\n\n      this.sequence.loop(true);\n\n      if (this.active) {\n        this.sequence.start(0);\n      }\n    }\n  };\n}\n"]},"metadata":{},"sourceType":"module"}