{"ast":null,"code":"var _jsxFileName = \"/home/fvrh/Documentos/week8/bbrss/src/components/PianoRollComponent.jsx\";\nimport React, { Component } from \"react\";\nimport \"./PianoRollComponent.css\";\nconst notes = [\"B\", \"A#\", \"A\", \"G#\", \"G\", \"F#\", \"F\", \"E\", \"D#\", \"D\", \"C#\", \"C\"];\nexport default class PianoRollComponent extends Component {\n  createTable() {\n    const initialScale = 1,\n          toScale = 6,\n          rows = 12,\n          cols = 16;\n    let table = [];\n\n    for (let scale = toScale; scale > initialScale - 1; scale--) {\n      let row = [];\n\n      for (let i = 0; i < rows; i++) {\n        let step = true; // let row = document.createElement(\"tr\");\n        // let noteRow = document.createElement(\"th\");\n        // noteRow.className = \"note-cell\";\n        // noteRow.innerHTML = notes[i] + scale;\n        // row.appendChild(noteRow);\n\n        row.push(React.createElement(\"td\", {\n          className: \"note-cell\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22\n          },\n          __self: this\n        }, notes[i] + scale));\n\n        for (let j = 0; j < cols; j++) {\n          //   let col = document.createElement(\"td\");\n          //   if (j % 4 === 0) step = !step;\n          //   if (step) col.className = \"cell-bar\";\n          //   col.setAttribute(\"note\", notes[i]);\n          //   col.setAttribute(\"scale\", scale);\n          //   col.setAttribute(\"step\", j);\n          //   col.setAttribute(\"onclick\", this.activateCell);\n          //   row.appendChild(col);\n          row.push(React.createElement(\"td\", {\n            key: notes[i] + scale + j,\n            className: step && \"cell-bar\",\n            note: notes[i],\n            scale: scale,\n            step: j,\n            onClick: e => this.activateCell(e),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 34\n            },\n            __self: this\n          }));\n        }\n\n        table.push(React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, row));\n      }\n    }\n\n    return table;\n  }\n\n  activateCell(e) {\n    const element = e.target;\n    element.classList.toggle(\"cell-active\");\n    console.log();\n    this.reReadSequence();\n  }\n\n  reReadSequence() {\n    const cells = document.querySelectorAll(\".cell-active\");\n    let sequence = new Array(16).fill(\"\");\n    cells.forEach(cell => {\n      let step = cell.getAttribute(\"step\");\n      let note = cell.getAttribute(\"note\");\n      let scale = cell.getAttribute(\"scale\");\n\n      if (typeof sequence[step] === \"string\" && sequence[step].length > 0) {\n        sequence[step] = [sequence[step], note + scale];\n      } else if (Array.isArray(sequence[step])) {\n        sequence[step].push(note + scale);\n      } else {\n        sequence[step] = note + scale;\n      }\n    });\n    return sequence;\n  }\n\n  render() {\n    return React.createElement(\"table\", {\n      id: \"sequencer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.createTable());\n  }\n\n}","map":{"version":3,"sources":["/home/fvrh/Documentos/week8/bbrss/src/components/PianoRollComponent.jsx"],"names":["React","Component","notes","PianoRollComponent","createTable","initialScale","toScale","rows","cols","table","scale","row","i","step","push","j","e","activateCell","element","target","classList","toggle","console","log","reReadSequence","cells","document","querySelectorAll","sequence","Array","fill","forEach","cell","getAttribute","note","length","isArray","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,0BAAP;AAEA,MAAMC,KAAK,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,GAAZ,EAAiB,IAAjB,EAAuB,GAAvB,EAA4B,IAA5B,EAAkC,GAAlC,EAAuC,GAAvC,EAA4C,IAA5C,EAAkD,GAAlD,EAAuD,IAAvD,EAA6D,GAA7D,CAAd;AAEA,eAAe,MAAMC,kBAAN,SAAiCF,SAAjC,CAA2C;AACxDG,EAAAA,WAAW,GAAG;AACZ,UAAMC,YAAY,GAAG,CAArB;AAAA,UACEC,OAAO,GAAG,CADZ;AAAA,UAEEC,IAAI,GAAG,EAFT;AAAA,UAGEC,IAAI,GAAG,EAHT;AAIA,QAAIC,KAAK,GAAG,EAAZ;;AACA,SAAK,IAAIC,KAAK,GAAGJ,OAAjB,EAA0BI,KAAK,GAAGL,YAAY,GAAG,CAAjD,EAAoDK,KAAK,EAAzD,EAA6D;AAC3D,UAAIC,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,IAApB,EAA0BK,CAAC,EAA3B,EAA+B;AAC7B,YAAIC,IAAI,GAAG,IAAX,CAD6B,CAE7B;AACA;AACA;AACA;AACA;;AACAF,QAAAA,GAAG,CAACG,IAAJ,CAAS;AAAI,UAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA2BZ,KAAK,CAACU,CAAD,CAAL,GAAWF,KAAtC,CAAT;;AAEA,aAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,IAApB,EAA0BO,CAAC,EAA3B,EAA+B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAJ,UAAAA,GAAG,CAACG,IAAJ,CACE;AACI,YAAA,GAAG,EAAEZ,KAAK,CAACU,CAAD,CAAL,GAAWF,KAAX,GAAmBK,CAD5B;AAEE,YAAA,SAAS,EAAEF,IAAI,IAAI,UAFrB;AAGE,YAAA,IAAI,EAAEX,KAAK,CAACU,CAAD,CAHb;AAIE,YAAA,KAAK,EAAEF,KAJT;AAKE,YAAA,IAAI,EAAEK,CALR;AAME,YAAA,OAAO,EAAEC,CAAC,IAAI,KAAKC,YAAL,CAAkBD,CAAlB,CANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAUD;;AACDP,QAAAA,KAAK,CAACK,IAAN,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKH,GAAL,CAAX;AACD;AACF;;AACD,WAAOF,KAAP;AACD;;AAEDQ,EAAAA,YAAY,CAACD,CAAD,EAAI;AACd,UAAME,OAAO,GAAGF,CAAC,CAACG,MAAlB;AACAD,IAAAA,OAAO,CAACE,SAAR,CAAkBC,MAAlB,CAAyB,aAAzB;AACAC,IAAAA,OAAO,CAACC,GAAR;AACA,SAAKC,cAAL;AACD;;AAEDA,EAAAA,cAAc,GAAG;AACf,UAAMC,KAAK,GAAGC,QAAQ,CAACC,gBAAT,CAA0B,cAA1B,CAAd;AACA,QAAIC,QAAQ,GAAG,IAAIC,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,EAAnB,CAAf;AAEAL,IAAAA,KAAK,CAACM,OAAN,CAAcC,IAAI,IAAI;AACpB,UAAInB,IAAI,GAAGmB,IAAI,CAACC,YAAL,CAAkB,MAAlB,CAAX;AACA,UAAIC,IAAI,GAAGF,IAAI,CAACC,YAAL,CAAkB,MAAlB,CAAX;AACA,UAAIvB,KAAK,GAAGsB,IAAI,CAACC,YAAL,CAAkB,OAAlB,CAAZ;;AACA,UAAI,OAAOL,QAAQ,CAACf,IAAD,CAAf,KAA0B,QAA1B,IAAsCe,QAAQ,CAACf,IAAD,CAAR,CAAesB,MAAf,GAAwB,CAAlE,EAAqE;AACnEP,QAAAA,QAAQ,CAACf,IAAD,CAAR,GAAiB,CAACe,QAAQ,CAACf,IAAD,CAAT,EAAiBqB,IAAI,GAAGxB,KAAxB,CAAjB;AACD,OAFD,MAEO,IAAImB,KAAK,CAACO,OAAN,CAAcR,QAAQ,CAACf,IAAD,CAAtB,CAAJ,EAAmC;AACxCe,QAAAA,QAAQ,CAACf,IAAD,CAAR,CAAeC,IAAf,CAAoBoB,IAAI,GAAGxB,KAA3B;AACD,OAFM,MAEA;AACLkB,QAAAA,QAAQ,CAACf,IAAD,CAAR,GAAiBqB,IAAI,GAAGxB,KAAxB;AACD;AACF,KAXD;AAYA,WAAOkB,QAAP;AACD;;AAEDS,EAAAA,MAAM,GAAG;AACP,WAAO;AAAO,MAAA,EAAE,EAAC,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuB,KAAKjC,WAAL,EAAvB,CAAP;AACD;;AAxEuD","sourcesContent":["import React, { Component } from \"react\";\nimport \"./PianoRollComponent.css\";\n\nconst notes = [\"B\", \"A#\", \"A\", \"G#\", \"G\", \"F#\", \"F\", \"E\", \"D#\", \"D\", \"C#\", \"C\"];\n\nexport default class PianoRollComponent extends Component {\n  createTable() {\n    const initialScale = 1,\n      toScale = 6,\n      rows = 12,\n      cols = 16;\n    let table = [];\n    for (let scale = toScale; scale > initialScale - 1; scale--) {\n      let row = [];\n      for (let i = 0; i < rows; i++) {\n        let step = true;\n        // let row = document.createElement(\"tr\");\n        // let noteRow = document.createElement(\"th\");\n        // noteRow.className = \"note-cell\";\n        // noteRow.innerHTML = notes[i] + scale;\n        // row.appendChild(noteRow);\n        row.push(<td className='note-cell'>{notes[i] + scale}</td>);\n\n        for (let j = 0; j < cols; j++) {\n          //   let col = document.createElement(\"td\");\n          //   if (j % 4 === 0) step = !step;\n          //   if (step) col.className = \"cell-bar\";\n          //   col.setAttribute(\"note\", notes[i]);\n          //   col.setAttribute(\"scale\", scale);\n          //   col.setAttribute(\"step\", j);\n          //   col.setAttribute(\"onclick\", this.activateCell);\n          //   row.appendChild(col);\n          row.push(\n            <td\n                key={notes[i] + scale + j}\n              className={step && \"cell-bar\"}\n              note={notes[i]}\n              scale={scale}\n              step={j}\n              onClick={e => this.activateCell(e)}\n            />\n          );\n        }\n        table.push(<td>{row}</td>);\n      }\n    }\n    return table;\n  }\n\n  activateCell(e) {\n    const element = e.target;\n    element.classList.toggle(\"cell-active\");\n    console.log();\n    this.reReadSequence();\n  }\n\n  reReadSequence() {\n    const cells = document.querySelectorAll(\".cell-active\");\n    let sequence = new Array(16).fill(\"\");\n\n    cells.forEach(cell => {\n      let step = cell.getAttribute(\"step\");\n      let note = cell.getAttribute(\"note\");\n      let scale = cell.getAttribute(\"scale\");\n      if (typeof sequence[step] === \"string\" && sequence[step].length > 0) {\n        sequence[step] = [sequence[step], note + scale];\n      } else if (Array.isArray(sequence[step])) {\n        sequence[step].push(note + scale);\n      } else {\n        sequence[step] = note + scale;\n      }\n    });\n    return sequence;\n  }\n\n  render() {\n    return <table id=\"sequencer\">{this.createTable()}</table>;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}