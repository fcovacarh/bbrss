(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,n){e.exports=n(245)},135:function(e,t,n){},136:function(e,t,n){},139:function(e,t,n){},146:function(e,t,n){},168:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(123),i=n.n(s),o=n(29),c=(n(135),n(22)),u=n(1),l=n(3),p=n(9),h=n(7),m=n(6),d=n(8),v=n(32),f=(n(136),n(10)),y=n.n(f),S=function e(t){var n=this;Object(l.a)(this,e),this.activateInstrument=function(){n.active?n.sequence&&(n.sequence.mute=!0):n.sequence&&(n.sequence.mute=!1),n.active=!n.active},this.updateSequence=function(e){n.notes=e,n.sequence&&0!==e.length?e.forEach(function(e,t){n.sequence.remove(t),n.sequence.add(t,e)}):n.sequence=new y.a.Sequence(function(e,t){n.instrument&&n.instrument.triggerAttackRelease(t,"10hz",e)},e,"16n"),n.active?n.sequence.mute=!1:n.sequence.mute=!0},this.id=t,this.instrument=null,this.sequence=null,this.active=!1,this.notes=new Array(16).fill(null)},g=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).updateInstrument=function(e){return a.instrument.oscillator.type=e.oscillator.type,a.instrument.envelope.attack=e.envelope.attack,a.instrument.envelope.decay=e.envelope.decay,a.instrument.envelope.sustain=e.envelope.sustain,a.instrument.envelope.release=e.envelope.release,a.instrument},a.getSynthData=function(){return{notes:a.notes,oscillator:{oscType:a.instrument.oscillator.type},envelope:{attack:a.instrument.envelope.attack,decay:a.instrument.envelope.decay,sustain:a.instrument.envelope.sustain,release:a.instrument.envelope.release}}},a.instrument=new y.a.Synth(n).toMaster(),a}return Object(d.a)(t,e),t}(S),b=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"house";return Object(l.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).updateInstrument=function(e){n.preload(e)},n.preload=function(e){var t=new y.a.Sampler({C3:"".concat(e,"/kick.wav"),"C#3":"".concat(e,"/snare.wav"),D3:"".concat(e,"/hihat.wav"),"D#3":"".concat(e,"/openhihat.wav"),E3:"".concat(e,"/crash.wav"),F3:"".concat(e,"/ride.wav"),"F#3":"".concat(e,"/perc.wav")},function(){n.loaded=!0,n.instrument=t.toMaster()},"./samples/")},n.getSamplerData=function(){return{notes:n.notes,style:n.style}},n.style=a,n.loaded=!1,n.preload(a),n}return Object(d.a)(t,e),t}(S),E=function e(){var t=this;Object(l.a)(this,e),this.init=function(){console.log("init"),y.a.Transport.cancel(),y.a.Transport.bpm.value=t.tempo},this.play=function(){console.log("playing..."),"stopped"===y.a.Transport.state&&(y.a.Transport.start(),t.playInstruments())},this.stop=function(){console.log("stopped"),"started"===y.a.Transport.state&&y.a.Transport.stop()},this.updateTempo=function(e){t.tempo=e,y.a.Transport.bpm.value=t.tempo},this.addBasicSynth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triangle";return t.instruments.synths.push(new g(e,n)),t.getSynths()},this.getSynths=function(){return t.instruments.synths},this.getSynth=function(e){return t.instruments.synths[e]},this.updateSynth=function(e,n){return t.instruments.synths[e].updateInstrument(n)},this.updateSynthSequence=function(e,n){t.instruments.synths[e].updateSequence(n)},this.activateSynth=function(e){t.instruments.synths[e].activateInstrument()},this.addSampler=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"house";return t.instruments.samplers.push(new b(e,n)),t.getSamplers()},this.getSamplers=function(){return t.instruments.samplers},this.getSampler=function(e){return t.instruments.samplers[e]},this.updateSampler=function(e,n){return t.instruments.samplers[e].updateInstrument(n)},this.updateSamplerSequence=function(e,n){t.instruments.samplers[e].updateSequence(n)},this.activateSampler=function(e){t.instruments.samplers[e].activateInstrument()},this.playInstruments=function(){t.instruments.synths.concat(t.instruments.samplers).forEach(function(e){y.a.Transport.schedule(function(t){e&&e.sequence&&e.sequence.start()},"0:0")})},this.exportSongData=function(e){var n=Object(c.a)(t.instruments.synths).map(function(e){return e.getSynthData()}),a=Object(c.a)(t.instruments.samplers).map(function(e){return e.getSamplerData()});return{name:e,tempo:t.tempo,instruments:{synths:n,samplers:a}}},this.tempo=130,this.instruments={synths:[],samplers:[]},this.init()},O=n(124),k=n.n(O),j=(n(139),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("button",{className:"play-btn",onClick:function(){return e.props.play()}},"Play");return this.props.isPlaying&&(t=r.a.createElement("button",{className:"stop-btn",onClick:function(){return e.props.stop()}},"Stop")),this.props.user?r.a.createElement("div",{id:"controls-bar"},r.a.createElement("div",{id:"tempo-wrapper"},r.a.createElement(k.a,{min:70,max:160,step:1,value:this.props.tempo,format:function(e){return"BPM: "+e},parse:function(e){return e.replace("BPM: ","")},onChange:function(t){return e.props.updateSongTempo(t)}})),r.a.createElement("div",{id:"navigation"},r.a.createElement(o.b,{to:"/creator"},r.a.createElement("button",null,"CREATION MODE")),r.a.createElement(o.b,{to:"/visualizer"},r.a.createElement("button",null,"VISUALIZATION MODE"))),r.a.createElement("div",{id:"song-controls"},t,r.a.createElement("button",{onClick:function(){return e.props.newSong()}},"NEW"),r.a.createElement(o.b,{to:"/load"},r.a.createElement("button",null,"LOAD")),r.a.createElement(o.b,{to:"/save"},r.a.createElement("button",null,"SAVE"))),r.a.createElement("div",{id:"auth-controls"},r.a.createElement("button",{onClick:function(){return e.props.logout()}},"LOGOUT"))):r.a.createElement("div",{id:"controls-bar"})}}]),t}(a.Component)),w=n(26),C=(n(146),n(78)(w)),q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={epilepsyMode:!1},e.toggleEpilepsyMode=function(){console.log(!e.state.epilepsyMode),e.setState(Object(u.a)({},e.state,{epilepsyMode:!e.state.epilepsyMode}))},e.draw=function(){var t=Math.abs(e.analyser.getValue()[0]);Math.abs(e.analyser.getValue()[15]);e.state.epilepsyMode?t>20&&e.iteration%8===0?e.sphere.scale.set(t/100,t/100,t/100):e.sphere.scale.set(16,16,16):t>20?e.sphere.scale.set(t/100,t/100,t/100):e.sphere.scale.set(1,1,1),e.sphere.rotation.y+=.5,e.renderer&&e.renderer.render(e.scene,e.camera),e.iteration>8?e.iteration=1:e.iteration++,requestAnimationFrame(e.draw)},e.analyser=new y.a.Analyser("fft",16),e.scene=null,e.camera=null,e.renderer=null,e.sphere=null,e.controls=n(78)(w),e.iteration=0,y.a.Master.connect(e.analyser),e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=window.innerWidth,t=window.innerHeight;this.scene=new w.Scene,this.camera=new w.PerspectiveCamera(15,e/t,1,1e3),this.camera.position.set(0,600,0),this.scene.add(this.camera),this.renderer=new w.WebGLRenderer,this.renderer.setSize(e,t),document.querySelector("#visualizer-wrapper").appendChild(this.renderer.domElement),this.controls=new C(this.camera,this.renderer.domElement);this.analyser.getValue();var n=new w.SphereGeometry(50,16,16),a=new w.MeshBasicMaterial({color:16777215,wireframe:!0}),r=new w.Mesh(n,a);r.position.x=0,r.position.z=0,this.scene.add(r),this.sphere=r,this.renderer.render(this.scene,this.camera),this.draw()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"visualizer-wrapper"},r.a.createElement("button",{id:"epilepsy-mode-button",className:this.state.epilepsyMode?"btn-on":"btn-off",onClick:function(){return e.toggleEpilepsyMode()}},"EPILEPSY MODE: ",this.state.epilepsyMode?"ON":"OFF")))}}]),t}(a.Component),N=n(127),A=n.n(N);n(165).config();var D=function e(){var t=this;Object(l.a)(this,e),this.login=function(e){return t.service.post("/auth/login",e).then(function(e){return e.data})},this.signup=function(e){return t.service.post("/auth/signup",e).then(function(e){return e.data})},this.logout=function(){return t.service.get("auth/logout").then(function(e){return e.data})},this.isLoggedIn=function(){return t.service.get("/auth/loggedin").then(function(e){return e.data})},this.saveSong=function(e){return t.service.post("/song/create",e).then(function(e){return e.data}).catch(function(e){return e})},this.getUserSongs=function(e){return t.service.get("/song/mySongs").then(function(e){return e.data}).catch(function(e){return e})},this.service=A.a.create({baseURL:"https://name-of-your-app.herokuapp.com/",withCredentials:!0})},T=(n(168),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={signup:!1,errors:null},e.services=new D,e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toggleSignup",value:function(){this.setState(Object(u.a)({},this.state,{signup:!this.state.signup}))}},{key:"submit",value:function(e){e.preventDefault();var t=e.target.username.value,n=e.target.password.value;this.state.signup?(n!==e.target.secondPassword.value&&this.setState(Object(u.a)({},this.state,{errors:"PASSWORDS DON'T MATCH"})),this.props.signup({username:t,password:n})):this.props.login({username:t,password:n})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"auth-form"},r.a.createElement("form",{onSubmit:function(t){return e.submit(t)}},r.a.createElement("div",{className:"form-logo"},"BBRSS"),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"username"},"USERNAME:"),r.a.createElement("input",{name:"username",type:"text"})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"password"},"PASSWORD:"),r.a.createElement("input",{name:"password",type:"password"})),this.state.signup?r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"secondPassword"},"REPEAT PASSWORD:"),r.a.createElement("input",{name:"secondPassword",type:"password"})):null,r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return e.toggleSignup()}},"NEW? SIGN UP")),this.state.errors?r.a.createElement("div",{className:"form-errors"},r.a.createElement("span",null,this.state.errors)):null,r.a.createElement("button",null,this.state.signup?"SIGN UP":"LOG IN")))}}]),t}(a.Component)),M=n(25),x=n(128),P=n.n(x),I=n(51),B=n.n(I),R=n(129),F=(n(239),["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"]),U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={id:n.props.idx,sequence:n.props.notes},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toNoteScaleArr",value:function(e){return[e.replace(/[0-9]/g,""),e.replace(/[^0-9]/g,"")]}},{key:"createTable",value:function(){var e=this,t=[];t.push(r.a.createElement("tr",null,r.a.createElement("td",{className:"sequencer-controls",colSpan:16},r.a.createElement("button",{className:"clear-button",onClick:function(){return e.clear()}},"CLEAR"))));for(var n=4;n>2;n--)for(var a=0;a<12;a++){var s=[],i=!0;s.push(r.a.createElement("td",{key:F[a]+n,className:"note-cell"},F[a]+n));for(var o=0;o<16;o++){o%4===0&&(i=!i);var c=i?"cell-bar--darken":"cell-bar",u=this.state.sequence[o];if(u){var l=this.toNoteScaleArr(u);F[a]===l[0]&&n===+l[1]&&(c+=" cell-active")}s.push(r.a.createElement("td",{key:F[a]+n+o,className:c,note:F[a],scale:n,step:o,onClick:function(t){return e.activateCell(t)}}))}t.push(r.a.createElement("tr",{key:"row-"+F[a]+n},s))}return t}},{key:"activateCell",value:function(e){var t=e.target,n=t.getAttribute("step"),a=t.getAttribute("note"),r=t.getAttribute("scale"),s=Object(c.a)(this.state.sequence);if(s[n]){var i=this.toNoteScaleArr(s[n]),o=Object(R.a)(i,2),l=o[0],p=o[1];s[n]=a===l&&r===p?null:a+r}else s[n]=a+r;this.setState(Object(u.a)({},this.state,{sequence:s}),this.props.updateSynthSequence(s))}},{key:"clear",value:function(){var e=new Array(16).fill(null);this.setState(Object(u.a)({},this.state,{sequence:e}),this.props.updateSynthSequence(e))}},{key:"render",value:function(){return r.a.createElement("table",{id:"sequencer-".concat(this.props.idx)},r.a.createElement("tbody",null,this.createTable()))}}]),t}(a.Component),L=(n(240),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).oscTypes=["triangle","sine","square"],n.state={id:0,oscillator:null,envelope:{attack:.005,decay:.1,sustain:.3,release:1},notes:new Array(16).fill(null),active:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(u.a)({},this.state,{id:this.props.idx,oscillator:this.props.oscillator,envelope:this.props.envelope,active:this.props.active,synth:this.props.instrument,notes:this.props.notes}))}},{key:"updateEnvelope",value:function(e,t){var n=this,a=Object(u.a)({},this.state).envelope;a[e]=t,this.setState(Object(u.a)({},this.state,{envelope:a}),function(){n.updateSynth()})}},{key:"updateOscillator",value:function(e){var t=this,n=Object(u.a)({},this.state).oscillator;n.type=e.currentTarget.value,this.setState(Object(u.a)({},this.state,{oscillator:n}),function(){t.updateSynth()})}},{key:"updateSynth",value:function(){this.props.updateSynth(this.state.id,{envelope:this.state.envelope,oscillator:this.state.oscillator})}},{key:"updateSynthSequence",value:function(e){this.props.updateSynthSequence(this.state.id,e)}},{key:"activateSynth",value:function(){this.props.activateSynth(this.state.id),this.setState(Object(u.a)({},this.state,{active:!this.state.active}))}},{key:"render",value:function(){var e=this,t=this.state.envelope,n=t.attack,a=t.decay,s=t.sustain,i=t.release,o={attack:"#ff40fc",decay:"#fffc36",sustain:"#00fbfe",release:"#00f92f"},c={attack:n,decay:a,sustain:s,release:i};return r.a.createElement("div",{className:"synth"},r.a.createElement("div",{className:"oscillator-controls"},r.a.createElement("div",{className:"activation-button"},r.a.createElement(B.a,{onChange:function(){return e.activateSynth()},checked:this.state.active})),r.a.createElement("div",{className:"oscillator-selector"},r.a.createElement("label",{htmlFor:"oscillator-selector"},"WAVE TYPE"),r.a.createElement("select",{id:"osc-select-".concat(this.state.id),name:"oscillator-selector",onChange:function(t){return e.updateOscillator(t)}},this.oscTypes.map(function(e){return r.a.createElement("option",{key:e,value:e},e.toUpperCase())})))),r.a.createElement("div",{className:"envelope-controls"},r.a.createElement(P.a,{a:this.state.envelope.attack,d:this.state.envelope.decay,s:this.state.envelope.sustain,r:this.state.envelope.release,style:{border:"1px solid #fff",height:"100px",width:"300px"}}),r.a.createElement("div",{className:"envelope-knobs"},Object.entries(c).map(function(t,n){return r.a.createElement("div",{key:t[0],className:"knob-wrapper"},r.a.createElement(M.CircularInput,{radius:35,value:t[1],onChange:function(n){return e.updateEnvelope(t[0],n)}},r.a.createElement(M.CircularTrack,{strokeWidth:3}),r.a.createElement(M.CircularProgress,{stroke:o[t[0]],strokeWidth:7}),r.a.createElement(M.CircularThumb,{fill:o[t[0]],r:9})),r.a.createElement("label",null,t[0].substring(0,3).toUpperCase()))}))),r.a.createElement("div",{className:"sequencer-wrapper"},r.a.createElement(U,{idx:this.state.id,notes:this.props.notes,updateSynthSequence:function(t){return e.updateSynthSequence(t)}})))}}]),t}(a.Component)),W=(n(242),{C3:"KICK","C#3":"SNARE",D3:"HIHAT","D#3":"O.HAT",E3:"CRASH",F3:"RIDE","F#3":"PERC",key:function(e){return Object.keys(this)[e]},value:function(e){return Object.values(this)[e]}}),z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={sequence:n.props.notes},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toNoteScaleArr",value:function(e){return[e.replace(/[0-9]/g,""),e.replace(/[^0-9]/g,"")]}},{key:"createTable",value:function(){var e=this,t=[];t.push(r.a.createElement("tr",null,r.a.createElement("td",{className:"sequencer-controls",colSpan:16},r.a.createElement("button",{className:"clear-button",onClick:function(){return e.clear()}},"CLEAR"))));for(var n=3;n>2;n--)for(var a=0;a<7;a++){var s=[],i=!0;s.push(r.a.createElement("td",{key:W.key(a),className:"note-cell"},W.value(a)));for(var o=0;o<16;o++){o%4===0&&(i=!i);var c=i?"cell-bar--darken":"cell-bar";(!Array.isArray(this.state.sequence[o])&&this.state.sequence[o]===W.key(a)||Array.isArray(this.state.sequence[o])&&this.state.sequence[o].includes(W.key(a)))&&(c+=" cell-active"),s.push(r.a.createElement("td",{key:W.key(a)+o,className:c,note:W.key(a),step:o,onClick:function(t){return e.activateCell(t)}}))}t.push(r.a.createElement("tr",{key:"row-"+W.key(a)+n},s))}return t}},{key:"activateCell",value:function(e){var t=e.target,n=t.getAttribute("step"),a=t.getAttribute("note"),r=Object(c.a)(this.state.sequence);if(Array.isArray(r[n])){if(r[n].includes(a)){var s=r[n].indexOf(a);r[n][s]=null}else r[n].push(a);r[n]=r[n].filter(function(e){return null!=e}),1===r[n].length&&(r[n]=r[n][0])}else a===r[n]?r[n]=null:r[n]=r[n]?[r[n],a]:a;this.props.updateSynthSequence(r),this.setState(Object(u.a)({},this.state,{sequence:r}))}},{key:"clear",value:function(){var e=new Array(16).fill(null);this.setState(Object(u.a)({},this.state,{sequence:e}),this.props.updateSynthSequence(e))}},{key:"render",value:function(){return r.a.createElement("table",{id:"sampler-sequencer-".concat(this.props.idx)},r.a.createElement("tbody",null,this.createTable()))}}]),t}(a.Component),V=(n(243),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={id:0,style:"house",active:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(u.a)({},this.state,{id:this.props.idx,active:this.props.active}))}},{key:"updateSampler",value:function(e){this.props.updateSampler(this.state.id,e)}},{key:"updateSamplerSequence",value:function(e){this.props.updateSamplerSequence(this.state.id,e)}},{key:"activateSampler",value:function(){this.props.activateSampler(this.state.id),this.setState(Object(u.a)({},this.state,{active:!this.state.active}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sampler"},r.a.createElement("div",{className:"sampler-controls"},r.a.createElement(B.a,{onChange:function(){return e.activateSampler()},checked:this.state.active})),r.a.createElement("div",{className:"sequencer-wrapper"},r.a.createElement(z,{idx:this.state.id,notes:this.props.notes,updateSynthSequence:function(t){return e.updateSamplerSequence(t)}})))}}]),t}(a.Component)),G=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderSynthsSection",value:function(){var e=this;return this.props.getSynths().map(function(t,n){return r.a.createElement(L,Object.assign({key:n,idx:n},t.instrument,{notes:t.notes,active:t.active,updateSynth:function(t,n){return e.props.updateSynth(t,n)},updateSynthSequence:function(t,n){return e.props.updateSynthSequence(t,n)},activateSynth:function(){return e.props.activateSynth(n)}}))})}},{key:"renderSamplerSection",value:function(){var e=this;return this.props.getSamplers().map(function(t,n){return r.a.createElement(V,Object.assign({key:n,idx:n},t,{notes:t.notes,active:t.active,updateSampler:function(t,n){return e.props.updateSampler(t,n)},updateSamplerSequence:function(t,n){return e.props.updateSamplerSequence(t,n)},activateSampler:function(){return e.props.activateSampler(n)}}))})}},{key:"renderCreationSection",value:function(){var e=this;return r.a.createElement("div",{id:"create-app"},r.a.createElement("div",{id:"instruments-rack"},r.a.createElement("div",{id:"add-wrapper"},r.a.createElement("button",{onClick:function(){return e.props.addNewBasicSynth()}},"Add Synth"),r.a.createElement("button",{onClick:function(){return e.props.addNewSampler()}},"Add Sampler")),this.renderSynthsSection(),this.renderSamplerSection()))}},{key:"render",value:function(){return r.a.createElement("div",{id:"Creator"},this.renderCreationSection())}}]),t}(a.Component),H=(n(244),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.userSongs;return r.a.createElement("div",{id:"load-screen"},t.map(function(t){return r.a.createElement("div",{className:"song-item"},r.a.createElement("h3",null,t.name),r.a.createElement("button",{onClick:function(){return e.props.loadSongData(t)}},"LOAD"))}))}}]),t}(a.Component)),J=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"submit",value:function(e){e.preventDefault(),this.props.saveSongData(e.target.name.value)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"save-screen"},r.a.createElement("form",{onSubmit:function(t){return e.submit(t)}},r.a.createElement("div",{className:"form-logo"},"BBRSS"),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"name"},"NAME:"),r.a.createElement("input",{name:"name",type:"text"})),r.a.createElement("button",null,"SAVE")))}}]),t}(a.Component),K=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={user:null,song:new E,userSongs:[],tempo:130,isPlaying:!1},e.services=new D,e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"signup",value:function(e){var t=this;this.services.signup(e).then(function(e){t.setState(Object(u.a)({},t.state,{user:e}))})}},{key:"login",value:function(e){var t=this;this.services.login(e).then(function(e){t.setState(Object(u.a)({},t.state,{user:e}))})}},{key:"logout",value:function(){var e=this;this.services.logout().then(function(t){e.setState(Object(u.a)({},e.state,{user:null}))})}},{key:"fetchUser",value:function(){var e=this;this.services.isLoggedIn().then(function(t){var n=t;e.services.getUserSongs().then(function(t){var a=Object(c.a)(e.state.userSongs).concat(t);e.setState(Object(u.a)({},e.state,{user:n,userSongs:a}))})}).catch(function(t){e.setState(Object(u.a)({},e.state,{user:null}))})}},{key:"updateSongtempo",value:function(e){var t=e;this.state.song.updateTempo(t),this.setState(Object(u.a)({},this.state,{tempo:t}))}},{key:"play",value:function(){this.state.song.play(),this.setState(Object(u.a)({},this.state,{isPlaying:!0}))}},{key:"stop",value:function(){this.state.song.stop(),this.setState(Object(u.a)({},this.state,{isPlaying:!1}))}},{key:"exportSongData",value:function(e){var t=this;console.log(this.state.song.exportSongData(e)),this.services.saveSong(this.state.song.exportSongData(e)).then(function(e){t.fetchUser(),t.props.history.push("/creator")})}},{key:"getUserSongs",value:function(){var e=this;this.services.getUserSongs().then(function(t){var n=Object(c.a)(e.state.userSongs).concat(t);e.setState(Object(u.a)({},e.state,{userSongs:n}))})}},{key:"newSong",value:function(){this.setState(Object(u.a)({},this.state,{song:new E,tempo:130,isPlaying:!1}),this.props.history.push("/creator"))}},{key:"loadSongData",value:function(e){var t=this;this.state.song.stop();var n=new E;n.updateTempo(e.tempo),e.instruments.synths.forEach(function(e,t){var a=Object(u.a)({},e),r=a.oscillator,s=a.envelope;r.oscType&&(r.type=r.oscType,delete r.oscType),n.addBasicSynth(t,r.type),n.updateSynth(t,{oscillator:r,envelope:s}),n.updateSynthSequence(t,e.notes)}),e.instruments.samplers.forEach(function(e,t){n.addSampler(t,e.style),n.updateSamplerSequence(t,e.notes)}),this.setState(Object(u.a)({},this.state,{song:n,tempo:e.tempo}),function(){t.props.history.push("/creator")})}},{key:"getSynths",value:function(){return this.state.song.getSynths()}},{key:"addNewBasicSynth",value:function(){var e=Object(u.a)({},this.state.song);e.instruments=this.state.song.addBasicSynth(this.state.song.instruments.length),this.setState(Object(u.a)({},this.state,{song:e}))}},{key:"updateSynth",value:function(e,t){var n=Object(u.a)({},this.state.song);n.instruments=this.state.song.updateSynth(e,t),this.setState(Object(u.a)({},this.state,{song:n}))}},{key:"updateSynthSequence",value:function(e,t){this.state.song.updateSynthSequence(e,t)}},{key:"activateSynth",value:function(e){this.state.song.activateSynth(e)}},{key:"getSamplers",value:function(){return this.state.song.getSamplers()}},{key:"addNewSampler",value:function(){var e=Object(u.a)({},this.state.song);e.instruments=this.state.song.addSampler(this.state.song.instruments.length),this.setState(Object(u.a)({},this.state,{song:e}))}},{key:"updateSampler",value:function(e,t){var n=Object(u.a)({},this.state.song);n.instruments=this.state.song.updateSampler(e,t),this.setState(Object(u.a)({},this.state,{song:n}))}},{key:"updateSamplerSequence",value:function(e,t){this.state.song.updateSamplerSequence(e,t)}},{key:"activateSampler",value:function(e){this.state.song.activateSampler(e)}},{key:"renderAuthComponent",value:function(){var e=this;return this.state.user?r.a.createElement(v.a,{to:"/creator"}):r.a.createElement(T,{login:function(t){return e.login(t)},signup:function(t){return e.signup(t)}})}},{key:"renderCreatorComponent",value:function(){var e=this;return this.state.user?r.a.createElement(G,{getSynths:function(){return e.getSynths()},getSamplers:function(){return e.getSamplers()},addNewBasicSynth:function(){return e.addNewBasicSynth()},updateSynth:function(t,n){return e.updateSynth(t,n)},updateSynthSequence:function(t,n){return e.updateSynthSequence(t,n)},activateSynth:function(t){return e.activateSynth(t)},addNewSampler:function(){return e.addNewSampler()},updateSampler:function(t,n){return e.updateSampler(t,n)},updateSamplerSequence:function(t,n){return e.updateSamplerSequence(t,n)},activateSampler:function(t){return e.activateSampler(t)}}):r.a.createElement(v.a,{to:"/"})}},{key:"renderVisualizerComponent",value:function(){return this.state.user?r.a.createElement(q,null):r.a.createElement(v.a,{to:"/"})}},{key:"renderLoadComponent",value:function(){var e=this;return this.state.user?r.a.createElement(H,{userSongs:this.state.userSongs,loadSongData:function(t){return e.loadSongData(t)}}):r.a.createElement(v.a,{to:"/"})}},{key:"renderSaveComponent",value:function(){var e=this;return this.state.user?r.a.createElement(J,{saveSongData:function(t){return e.exportSongData(t)}}):r.a.createElement(v.a,{to:"/"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(j,{user:this.state.user,logout:function(){return e.logout()},isPlaying:this.state.isPlaying,tempo:this.state.tempo,play:function(){return e.play()},stop:function(){return e.stop()},newSong:function(){return e.newSong()},exportSongData:function(){return e.exportSongData()},updateSongTempo:function(t){return e.updateSongtempo(t)}}),r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",render:function(){return e.renderAuthComponent()}}),r.a.createElement(v.b,{path:"/visualizer",render:function(){return e.renderVisualizerComponent()}}),r.a.createElement(v.b,{path:"/creator",render:function(){return e.renderCreatorComponent()}}),r.a.createElement(v.b,{path:"/load",render:function(){return e.renderLoadComponent()}}),r.a.createElement(v.b,{path:"/save",render:function(){return e.renderSaveComponent()}})))}}]),t}(r.a.Component),Y=Object(v.f)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[130,1,2]]]);
//# sourceMappingURL=main.daafa855.chunk.js.map