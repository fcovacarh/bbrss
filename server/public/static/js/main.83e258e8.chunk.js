(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,n){e.exports=n(198)},115:function(e,t,n){},116:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(104),i=n.n(c),r=n(109),o=(n(115),n(7)),u=n(11),l=n(17),h=n(24),p=n(23),v=n(25),y=(n(116),n(20)),d=n.n(y),f=function e(t,n){var a=this;Object(u.a)(this,e),this.updateInstrument=function(e){return a.synth.oscillator.type=e.oscillator.type,a.synth.envelope.attack=e.envelope.attack,a.synth.envelope.decay=e.envelope.decay,a.synth.envelope.sustain=e.envelope.sustain,a.synth.envelope.release=e.envelope.release,a.synth},this.activateInstrument=function(){a.active?a.sequence&&a.sequence.stop():a.sequence&&a.sequence.start(),a.active=!a.active},this.updateSequence=function(e){0!==e.length&&(a.active&&a.sequence&&a.sequence.stop("1m"),a.sequence=new d.a.Sequence(function(e,t){a.synth.triggerAttackRelease(t,"10hz",e)},e,"16n"),a.active&&a.sequence.start("1m"))},this.id=t,this.synth=new d.a.Synth(n).toMaster(),this.sequence=null,this.active=!1},m=function(){function e(){var t=this;Object(u.a)(this,e),this.addBasicSynth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triangle";return t.instruments.push(new f(e,n)),t.getSynths()},this.getSynths=function(){return t.instruments},this.getSynth=function(e){return t.instruments[e]},this.updateSynth=function(e,n){return t.instruments[e].updateInstrument(n)},this.updateSynthSequence=function(e,n){console.log(e),t.instruments[e].updateSequence(n)},this.activateSynth=function(e){t.instruments[e].activateInstrument()},this.play=function(){d.a.Transport.start()},this.stop=function(){d.a.Transport.stop()},this.tempo=128,this.instruments=[],this.init()}return Object(l.a)(e,[{key:"init",value:function(){d.a.Transport.bpm.value=this.tempo}}]),e}(),S=n(14),b=n(105),g=n.n(b),k=n(106),E=n.n(k),O=(n(187),["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"]),j=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(l.a)(t,[{key:"createTable",value:function(){for(var e=this,t=[],n=4;n>2;n--)for(var a=0;a<12;a++){var c=[],i=!0;c.push(s.a.createElement("td",{key:O[a]+n,className:"note-cell"},O[a]+n));for(var r=0;r<16;r++){r%4===0&&(i=!i);var o=i?"cell-bar--darken":"cell-bar";c.push(s.a.createElement("td",{key:O[a]+n+r,className:o,note:O[a],scale:n,step:r,onClick:function(t){return e.activateCell(t)}}))}t.push(s.a.createElement("tr",{key:"row-"+O[a]+n},c))}return t}},{key:"activateCell",value:function(e){var t=e.target,n=t.getAttribute("step"),a=document.querySelector('[step="'.concat(n,'"]'));a.getAttribute("step")!==n&&(console.log("wololo"),a.classList.remove(".cell-active")),t.classList.toggle("cell-active"),this.reReadSequence()}},{key:"reReadSequence",value:function(){var e=document.querySelectorAll(".cell-active"),t=new Array(16).fill(null);e.forEach(function(e){var n=e.getAttribute("step"),a=e.getAttribute("note"),s=e.getAttribute("scale");"string"===typeof t[n]&&t[n].length>0?t[n]=[t[n],[a+s]]:Array.isArray(t[n])?t[n].push([a+s]):t[n]=[a+s]}),this.props.updateSynthSequence(t)}},{key:"render",value:function(){return s.a.createElement("table",{id:"sequencer-".concat(this.props.idx)},s.a.createElement("tbody",null,this.createTable()))}}]),t}(a.Component),q=(n(188),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).oscTypes=["triangle","sine","square"],n.state={id:0,oscillator:null,envelope:{attack:.005,decay:.1,sustain:.3,release:1}},n}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(o.a)({},this.state,{id:this.props.idx,oscillator:this.props.oscillator,envelope:this.props.envelope,active:!1}))}},{key:"updateEnvelope",value:function(e,t){var n=this,a=Object(o.a)({},this.state).envelope;a[e]=t,this.setState(Object(o.a)({},this.state,{envelope:a}),function(){n.updateSynth()})}},{key:"updateOscillator",value:function(e){var t=this,n=Object(o.a)({},this.state).oscillator;n.type=e.currentTarget.value,this.setState(Object(o.a)({},this.state,{oscillator:n}),function(){t.updateSynth()})}},{key:"updateSynth",value:function(){this.props.updateSynth(this.state.id,{envelope:this.state.envelope,oscillator:this.state.oscillator})}},{key:"updateSynthSequence",value:function(e){this.props.updateSynthSequence(this.state.id,e)}},{key:"activateSynth",value:function(){this.props.activateSynth(this.state.id),this.setState(Object(o.a)({},this.state,{active:!this.state.active}))}},{key:"render",value:function(){var e=this,t=this.state.envelope,n=t.attack,a=t.decay,c=t.sustain,i=t.release,r={attack:"#ff40fc",decay:"#fffc36",sustain:"#00fbfe",release:"#00f92f"},o={attack:n,decay:a,sustain:c,release:i};return s.a.createElement("div",{className:"synth"},s.a.createElement("div",{className:"oscillator-controls"},s.a.createElement("div",{className:"activation-button"},s.a.createElement(E.a,{onChange:function(){return e.activateSynth()},checked:this.state.active})),s.a.createElement("div",{className:"oscillator-selector"},s.a.createElement("label",{htmlFor:"oscillator-selector"},"WAVE TYPE"),s.a.createElement("select",{id:"osc-select-".concat(this.state.id),name:"oscillator-selector",onChange:function(t){return e.updateOscillator(t)}},this.oscTypes.map(function(e){return s.a.createElement("option",{key:e,value:e},e.toUpperCase())})))),s.a.createElement("div",{className:"envelope-controls"},s.a.createElement(g.a,{a:this.state.envelope.attack,d:this.state.envelope.decay,s:this.state.envelope.sustain,r:this.state.envelope.release,style:{border:"1px solid #fff",height:"100px",width:"300px"}}),s.a.createElement("div",{className:"envelope-knobs"},Object.entries(o).map(function(t,n){return s.a.createElement("div",{className:"knob-wrapper"},s.a.createElement(S.CircularInput,{key:t[0],radius:35,value:t[1],onChange:function(n){return e.updateEnvelope(t[0],n)}},s.a.createElement(S.CircularTrack,{strokeWidth:3}),s.a.createElement(S.CircularProgress,{stroke:r[t[0]],strokeWidth:7}),s.a.createElement(S.CircularThumb,{fill:r[t[0]],r:9})),s.a.createElement("label",null,t[0].substring(0,3).toUpperCase()))}))),s.a.createElement("div",{className:"sequencer-wrapper"},s.a.createElement(j,{idx:this.state.id,updateSynthSequence:function(t){return e.updateSynthSequence(t)}})))}}]),t}(a.Component)),w=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).state={song:new m},n}return Object(v.a)(t,e),Object(l.a)(t,[{key:"addNewBasicSynth",value:function(){var e=Object(o.a)({},this.state.song);e.instruments=this.state.song.addBasicSynth(this.state.song.instruments.length),this.setState(Object(o.a)({},this.state,{song:e}))}},{key:"updateSynth",value:function(e,t){var n=Object(o.a)({},this.state.song);n.instruments=this.state.song.updateSynth(e,t),this.setState(Object(o.a)({},this.state,{song:n}))}},{key:"updateSynthSequence",value:function(e,t){this.state.song.updateSynthSequence(e,t)}},{key:"activateSynth",value:function(e){this.state.song.activateSynth(e)}},{key:"play",value:function(){this.state.song.play()}},{key:"stop",value:function(){this.state.song.stop()}},{key:"render",value:function(){var e=this,t=this.state.song.getSynths();return s.a.createElement("div",{className:"App"},s.a.createElement("button",{onClick:function(){return e.addNewBasicSynth()}},"Add Basic Synth"),s.a.createElement("button",{onClick:function(){return e.play()}},"Play"),s.a.createElement("button",{onClick:function(){return e.stop()}},"Stop"),s.a.createElement("div",{className:"synth-rack"},t.map(function(t,n){return s.a.createElement(q,Object.assign({key:n,idx:n},t.synth,{updateSynth:function(t,n){return e.updateSynth(t,n)},updateSynthSequence:function(t,n){return e.updateSynthSequence(t,n)},activateSynth:function(){return e.activateSynth(n)}}))})))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(r.a,null,s.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[110,1,2]]]);
//# sourceMappingURL=main.83e258e8.chunk.js.map