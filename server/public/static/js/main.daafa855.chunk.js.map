{"version":3,"sources":["classes/Instrument.class.js","classes/BasicSynth.class.js","classes/Sampler.class.js","classes/Song.class.js","components/ControlsBar.jsx","components/VisualizerComponent.jsx","tools/Services.js","components/AuthComponent.jsx","components/PianoRollComponent.jsx","components/SynthComponent.jsx","components/SequencerComponent.jsx","components/DrumSamplerComponent.jsx","components/CreatorComponent.jsx","components/LoadComponent.jsx","components/SaveComponent.jsx","App.js","serviceWorker.js","index.js"],"names":["Instrument","id","_this","this","Object","classCallCheck","activateInstrument","active","sequence","mute","updateSequence","notes","length","forEach","note","idx","remove","add","Tone","Sequence","time","instrument","triggerAttackRelease","Array","fill","BasicSynth","oscType","possibleConstructorReturn","getPrototypeOf","call","updateInstrument","props","oscillator","type","envelope","attack","decay","sustain","release","getSynthData","Synth","toMaster","Sampler","style","arguments","undefined","preload","sampler","C3","concat","C#3","D3","D#3","E3","F3","F#3","loaded","getSamplerData","Song","init","console","log","Transport","cancel","bpm","value","tempo","play","state","start","playInstruments","stop","updateTempo","newTempo","addBasicSynth","instruments","synths","push","getSynths","getSynth","updateSynth","updateSynthSequence","activateSynth","addSampler","samplers","getSamplers","getSampler","updateSampler","updateSamplerSequence","activateSampler","schedule","exportSongData","name","toConsumableArray","map","synth","ControlsBar","playButton","react_default","a","createElement","className","onClick","isPlaying","user","react_numeric_input_default","min","max","step","format","num","parse","strValue","replace","onChange","updateSongTempo","react_router_dom","to","newSong","logout","Component","OrbitControls","require","THREE","VisualizerComponent","epilepsyMode","toggleEpilepsyMode","setState","objectSpread","draw","bassValue","Math","abs","analyser","getValue","iteration","sphere","scale","set","rotation","y","renderer","render","scene","camera","requestAnimationFrame","Analyser","controls","Master","connect","V_WIDTH","window","innerWidth","V_HEIGHT","innerHeight","position","setSize","document","querySelector","appendChild","domElement","sphereGeometry","sphereMaterial","color","wireframe","x","z","_this2","Fragment","config","Services","login","credentials","service","post","then","response","data","signup","get","isLoggedIn","saveSong","songProperties","catch","err","getUserSongs","axios","create","baseURL","process","withCredentials","AuthComponent","errors","services","e","preventDefault","username","target","password","secondPassword","onSubmit","submit","htmlFor","toggleSignup","PianoRollComponent","noteScaleStr","table","colSpan","clear","initialScale","i","row","key","j","classNameString","noteAndScale","noteScaleArr","toNoteScaleArr","activateCell","element","getAttribute","newSequence","_this$toNoteScaleArr","_this$toNoteScaleArr2","slicedToArray","stepNote","stepScale","createTable","SynthComponent","oscTypes","envKey","newValue","newEnvelope","_this3","newOscillator","currentTarget","_this4","_this$state$envelope","colors","envelopeControls","react_switch_default","checked","updateOscillator","toUpperCase","lib_default","d","s","r","border","height","width","entries","dist","radius","updateEnvelope","strokeWidth","stroke","substring","PianoRollComponent_PianoRollComponent","n","keys","values","SequencerComponent","isArray","includes","indexOf","filter","el","DrumSamplerComponent","SequencerComponent_SequencerComponent","CreatorComponent","SynthComponent_SynthComponent","assign","DrumSamplerComponent_DrumSamplerComponent","addNewBasicSynth","addNewSampler","renderSynthsSection","renderSamplerSection","renderCreationSection","LoadComponent","songs","userSongs","song","loadSongData","SaveComponent","saveSongData","App","fetchUser","_this5","newUserSongs","_this6","history","_this7","songData","_this8","synthData","_synthData","samplerData","_this9","react_router","AuthComponent_AuthComponent","_this10","CreatorComponent_CreatorComponent","VisualizerComponent_VisualizerComponent","_this11","LoadComponent_LoadComponent","_this12","SaveComponent_SaveComponent","_this13","ControlsBar_ControlsBar","updateSongtempo","exact","path","renderAuthComponent","renderVisualizerComponent","renderCreatorComponent","renderLoadComponent","renderSaveComponent","React","withRouter","Boolean","location","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.daafa855.chunk.js","sourcesContent":["import Tone from \"tone\";\n\nexport default class Instrument {\n  constructor(id) {\n    this.id = id;\n    this.instrument = null;\n    this.sequence = null;\n    this.active = false;\n    this.notes = new Array(16).fill(null);\n  }\n\n  activateInstrument = () => {\n    if (this.active) {\n      if (this.sequence) {\n        this.sequence.mute = true;\n      }\n    } else {\n      if (this.sequence) {\n        this.sequence.mute = false;\n      }\n    }\n    this.active = !this.active;\n  };\n\n  updateSequence = notes => {\n    this.notes = notes;\n    if (this.sequence && notes.length !== 0) {\n      notes.forEach((note, idx) => {\n        this.sequence.remove(idx);\n        this.sequence.add(idx, note);\n      });\n    } else {\n      this.sequence = new Tone.Sequence(\n        (time, note) => {\n          if (this.instrument) this.instrument.triggerAttackRelease(note, \"10hz\", time);\n        },\n        notes,\n        \"16n\"\n      );\n    }\n    (!this.active) ? this.sequence.mute = true : this.sequence.mute = false;\n  };\n}\n","import Tone from \"tone\";\nimport Instrument from \"./Instrument.class\";\n\nexport default class BasicSynth extends Instrument {\n  constructor(id, oscType) {\n    super(id);\n    this.instrument = new Tone.Synth(oscType).toMaster();\n  }\n\n  updateInstrument = props => {\n    this.instrument.oscillator.type = props.oscillator.type;\n    this.instrument.envelope.attack = props.envelope.attack;\n    this.instrument.envelope.decay = props.envelope.decay;\n    this.instrument.envelope.sustain = props.envelope.sustain;\n    this.instrument.envelope.release = props.envelope.release;\n    return this.instrument;\n  };\n\n  getSynthData = () => {\n    return {\n      notes: this.notes,\n      oscillator: {oscType: this.instrument.oscillator.type},\n      envelope: {\n        attack: this.instrument.envelope.attack,\n        decay: this.instrument.envelope.decay,\n        sustain: this.instrument.envelope.sustain,\n        release: this.instrument.envelope.release\n      }\n    }\n  }\n}\n","import Tone from \"tone\";\nimport Instrument from \"./Instrument.class\";\n\nexport default class Sampler extends Instrument {\n  constructor(id, style = \"house\") {\n    super(id);\n    this.style = style;\n    this.loaded = false;\n    this.preload(style);\n  }\n\n  updateInstrument = style => {\n    this.preload(style);\n  };\n\n  preload = style => {\n    let sampler = new Tone.Sampler(\n      {\n        C3: `${style}/kick.wav`,\n        \"C#3\": `${style}/snare.wav`,\n        D3: `${style}/hihat.wav`,\n        \"D#3\": `${style}/openhihat.wav`,\n        E3: `${style}/crash.wav`,\n        F3: `${style}/ride.wav`,\n        \"F#3\": `${style}/perc.wav`\n      },\n      () => {\n        this.loaded = true;\n        this.instrument = sampler.toMaster();\n      },\n      \"./samples/\"\n    );\n  };\n\n  getSamplerData = () => {\n    return {\n      notes: this.notes,\n      style: this.style\n    }\n  }\n}\n","import Tone from \"tone\";\nimport BasicSynth from \"./BasicSynth.class.js\";\nimport Sampler from \"./Sampler.class.js\";\n\nclass Song {\n  constructor() {\n    this.tempo = 130;\n    this.instruments = {\n      synths: [],\n      samplers: []\n    };\n    this.init();\n  }\n\n  init = () => {\n    console.log('init');\n    Tone.Transport.cancel();\n    Tone.Transport.bpm.value = this.tempo;\n  };\n\n  play = () => {\n    console.log(\"playing...\");\n    if (Tone.Transport.state === \"stopped\") {\n      Tone.Transport.start();\n      this.playInstruments();\n    }\n  };\n\n  stop = () => {\n    console.log(\"stopped\");\n    if (Tone.Transport.state === \"started\") {\n      Tone.Transport.stop();\n    }\n  };\n\n  updateTempo = newTempo => {\n    this.tempo = newTempo;\n    Tone.Transport.bpm.value = this.tempo;\n  };\n\n  //SYNTHS\n  addBasicSynth = (id, type = \"triangle\") => {\n    this.instruments.synths.push(new BasicSynth(id, type));\n    return this.getSynths();\n  };\n\n  getSynths = () => {\n    return this.instruments.synths;\n  };\n\n  getSynth = idx => {\n    return this.instruments.synths[idx];\n  };\n\n  updateSynth = (idx, props) => {\n    return this.instruments.synths[idx].updateInstrument(props);\n  };\n\n  updateSynthSequence = (idx, notes) => {\n    this.instruments.synths[idx].updateSequence(notes);\n  };\n\n  activateSynth = idx => {\n    this.instruments.synths[idx].activateInstrument();\n  };\n\n  //SAMPLERS\n  addSampler = (id, style = \"house\") => {\n    this.instruments.samplers.push(new Sampler(id, style));\n    return this.getSamplers();\n  };\n\n  getSamplers = () => {\n    return this.instruments.samplers;\n  };\n\n  getSampler = idx => {\n    return this.instruments.samplers[idx];\n  };\n\n  updateSampler = (idx, style) => {\n    return this.instruments.samplers[idx].updateInstrument(style);\n  };\n\n  updateSamplerSequence = (idx, notes) => {\n    this.instruments.samplers[idx].updateSequence(notes);\n  };\n\n  activateSampler = idx => {\n    this.instruments.samplers[idx].activateInstrument();\n  };\n\n  playInstruments = () => {\n    this.instruments.synths\n      .concat(this.instruments.samplers)\n      .forEach(instrument => {\n        Tone.Transport.schedule(time => {\n          if (instrument && instrument.sequence) {\n            instrument.sequence.start();\n          }\n        }, \"0:0\");\n      });\n  };\n\n  exportSongData = (name) => {\n    const synths = [...this.instruments.synths].map(synth =>\n      synth.getSynthData()\n    );\n    const samplers = [...this.instruments.samplers].map(sampler =>\n      sampler.getSamplerData()\n    );\n    return {\n      name: name,\n      tempo: this.tempo,\n      instruments: {\n        synths,\n        samplers\n      }\n    };\n  };\n}\n\nexport default Song;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport NumericInput from 'react-numeric-input';\nimport \"./ControlsBar.css\";\n\nexport default class ControlsBar extends Component {\n  render() {\n    let playButton = (\n      <button className=\"play-btn\" onClick={() => this.props.play()}>\n        Play\n      </button>\n    );\n    if (this.props.isPlaying) {\n      playButton = (\n        <button className=\"stop-btn\" onClick={() => this.props.stop()}>\n          Stop\n        </button>\n      );\n    }\n\n    if (this.props.user) {\n      return (\n        <div id=\"controls-bar\">\n            <div id=\"tempo-wrapper\">\n            <NumericInput\n              min={70}\n              max={160}\n              step={1}\n              value={this.props.tempo}\n              format={num => 'BPM: ' + num}\n              parse={strValue => strValue.replace('BPM: ', \"\")}\n              onChange={newTempo => this.props.updateSongTempo(newTempo)}\n            />\n            </div>\n          <div id=\"navigation\">\n            <Link to=\"/creator\">\n              <button>CREATION MODE</button>\n            </Link>\n            <Link to=\"/visualizer\">\n              <button>VISUALIZATION MODE</button>\n            </Link>\n          </div>\n          <div id=\"song-controls\">\n            {playButton}\n            <button onClick={() => this.props.newSong()}>NEW</button>\n            <Link to=\"/load\"><button>LOAD</button></Link>\n            <Link to=\"/save\"><button>SAVE</button></Link>\n          </div>\n          <div id=\"auth-controls\">\n            <button onClick={() => this.props.logout()}>LOGOUT</button>\n          </div>\n        </div>\n      );\n    } else {\n      return <div id=\"controls-bar\"></div>\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport Tone from \"tone\";\nimport * as THREE from \"three\";\nimport \"./VisualizerComponent.css\";\n\nconst OrbitControls = require(\"three-orbit-controls\")(THREE);\n\nexport default class VisualizerComponent extends Component {\n  state = {\n    epilepsyMode: false\n  };\n  constructor() {\n    super();\n    this.analyser = new Tone.Analyser(\"fft\", 16);\n    this.scene = null;\n    this.camera = null;\n    this.renderer = null;\n    this.sphere = null;\n    this.controls = require(\"three-orbit-controls\")(THREE);\n    this.iteration = 0;\n    Tone.Master.connect(this.analyser);\n  }\n\n  componentDidMount() {\n    const V_WIDTH = window.innerWidth,\n      V_HEIGHT = window.innerHeight;\n\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera(15, V_WIDTH / V_HEIGHT, 1, 1000);\n    this.camera.position.set(0, 600, 0);\n    this.scene.add(this.camera);\n    this.renderer = new THREE.WebGLRenderer();\n    this.renderer.setSize(V_WIDTH, V_HEIGHT);\n    document\n      .querySelector(\"#visualizer-wrapper\")\n      .appendChild(this.renderer.domElement);\n\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n\n    const values = this.analyser.getValue();\n    const RADIUS = 50;\n    const SEGMENTS = 16;\n    const RINGS = 16;\n\n    const sphereGeometry = new THREE.SphereGeometry(RADIUS, SEGMENTS, RINGS);\n\n    const sphereMaterial = new THREE.MeshBasicMaterial({\n      color: 0xffffff,\n      wireframe: true\n    });\n\n    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n\n    // Move the Sphere back in Z so we\n    // can see it.\n    sphere.position.x = 0;\n    sphere.position.z = 0;\n\n    // Finally, add the sphere to the scene.\n    this.scene.add(sphere);\n    this.sphere = sphere;\n    this.renderer.render(this.scene, this.camera);\n    this.draw();\n  }\n\n  toggleEpilepsyMode = () => {\n    console.log(!this.state.epilepsyMode);\n    this.setState({\n      ...this.state,\n      epilepsyMode: !this.state.epilepsyMode\n    });\n  };\n\n  draw = () => {\n    const bassValue = Math.abs(this.analyser.getValue()[0]);\n    const highValue = Math.abs(this.analyser.getValue()[15]);\n    const threshold = 8;\n    if (this.state.epilepsyMode) {\n      if (bassValue > 20 && this.iteration % threshold === 0) {\n        this.sphere.scale.set(\n          bassValue / 100,\n          bassValue / 100,\n          bassValue / 100\n        );\n      } else {\n        this.sphere.scale.set(16, 16, 16);\n      }\n    } else {\n      if (bassValue > 20) {\n        this.sphere.scale.set(\n          bassValue / 100,\n          bassValue / 100,\n          bassValue / 100\n        );\n      } else {\n        this.sphere.scale.set(1, 1, 1);\n      }\n    }\n    this.sphere.rotation.y += 0.5;\n    if (this.renderer) this.renderer.render(this.scene, this.camera);\n    this.iteration > threshold ? (this.iteration = 1) : this.iteration++;\n    requestAnimationFrame(this.draw);\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <div id=\"visualizer-wrapper\">\n          <button\n            id=\"epilepsy-mode-button\"\n            className={this.state.epilepsyMode ? \"btn-on\" : \"btn-off\"}\n            onClick={() => this.toggleEpilepsyMode()}\n          >\n            EPILEPSY MODE: {this.state.epilepsyMode ? 'ON' : 'OFF'}\n          </button>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","import axios from \"axios\";\nrequire(\"dotenv\").config();\n\nexport default class Services {\n  constructor() {\n    this.service = axios.create({\n      baseURL: process.env.REACT_APP_URL,\n      withCredentials: true\n    });\n  }\n\n  login = credentials => {\n    return this.service\n      .post(\"/auth/login\", credentials)\n      .then(response => response.data);\n  };\n\n  signup = credentials => {\n    return this.service\n      .post(\"/auth/signup\", credentials)\n      .then(response => response.data);\n  };\n\n  logout = () => {\n    return this.service.get(\"auth/logout\").then(response => response.data);\n  };\n\n  isLoggedIn = () => {\n    return this.service.get(\"/auth/loggedin\").then(response => response.data);\n  };\n\n  saveSong = songProperties => {\n    return this.service\n      .post(\"/song/create\", songProperties)\n      .then(response => response.data)\n      .catch(err => err);\n  };\n\n  getUserSongs = songProperties => {\n    return this.service\n      .get(\"/song/mySongs\")\n      .then(response => response.data)\n      .catch(err => err);\n  };\n}\n","import React, { Component } from \"react\";\nimport Services from \"../tools/Services\";\nimport \"./AuthComponent.css\";\n\nexport default class AuthComponent extends Component {\n  constructor() {\n    super();\n    this.services = new Services();\n  }\n\n  state = {\n    signup: false,\n    errors: null\n  };\n\n  toggleSignup() {\n    this.setState({\n      ...this.state,\n      signup: !this.state.signup\n    });\n  }\n\n  submit(e) {\n    e.preventDefault();\n    const username = e.target.username.value;\n    const password = e.target.password.value;\n    if (this.state.signup) {\n      const secondPassword = e.target.secondPassword.value;\n      if (password !== secondPassword) {\n        this.setState({\n          ...this.state,\n          errors: \"PASSWORDS DON'T MATCH\"\n        });\n      }\n      this.props.signup({ username, password });\n    } else {\n      this.props.login({ username, password });\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"auth-form\">\n        <form onSubmit={e => this.submit(e)}>\n          <div className=\"form-logo\">BBRSS</div>\n          <div className=\"input-group\">\n            <label htmlFor=\"username\">USERNAME:</label>\n            <input name=\"username\" type=\"text\" />\n          </div>\n          <div className=\"input-group\">\n            <label htmlFor=\"password\">PASSWORD:</label>\n            <input name=\"password\" type=\"password\" />\n          </div>\n          {this.state.signup ? (\n            <div className=\"input-group\">\n              <label htmlFor=\"secondPassword\">REPEAT PASSWORD:</label>\n              <input name=\"secondPassword\" type=\"password\" />\n            </div>\n          ) : null}\n          <div>\n            <a onClick={() => this.toggleSignup()}>NEW? SIGN UP</a>\n          </div>\n          {this.state.errors ? (\n            <div className=\"form-errors\">\n              <span>{this.state.errors}</span>\n            </div>\n          ) : null}\n          <button>{this.state.signup ? \"SIGN UP\" : \"LOG IN\"}</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport \"./PianoRollComponent.css\";\n\nconst notes = [\"B\", \"A#\", \"A\", \"G#\", \"G\", \"F#\", \"F\", \"E\", \"D#\", \"D\", \"C#\", \"C\"];\n\nexport default class PianoRollComponent extends Component {\n  state = {\n    id: this.props.idx,\n    sequence: this.props.notes\n  };\n\n  toNoteScaleArr(noteScaleStr) {\n    return [\n      noteScaleStr.replace(/[0-9]/g, \"\"),\n      noteScaleStr.replace(/[^0-9]/g, \"\")\n    ];\n  }\n\n  createTable() {\n    const initialScale = 3,\n      toScale = 4,\n      rows = 12,\n      cols = 16;\n    let table = [];\n    table.push(\n      <tr>\n        <td className=\"sequencer-controls\" colSpan={cols}>\n          <button className=\"clear-button\" onClick={() => this.clear()}>\n            CLEAR\n          </button>\n        </td>\n      </tr>\n    );\n    for (let scale = toScale; scale > initialScale - 1; scale--) {\n      for (let i = 0; i < rows; i++) {\n        let row = [];\n        let step = true;\n        row.push(\n          <td key={notes[i] + scale} className=\"note-cell\">\n            {notes[i] + scale}\n          </td>\n        );\n\n        for (let j = 0; j < cols; j++) {\n          if (j % 4 === 0) step = !step;\n          let classNameString = step ? \"cell-bar--darken\" : \"cell-bar\";\n          let noteAndScale = this.state.sequence[j];\n          if (noteAndScale) {\n            let noteScaleArr = this.toNoteScaleArr(noteAndScale);\n            if (notes[i] === noteScaleArr[0] && scale === +noteScaleArr[1]) {\n              classNameString += \" cell-active\";\n            }\n          }\n\n          row.push(\n            <td\n              key={notes[i] + scale + j}\n              className={classNameString}\n              note={notes[i]}\n              scale={scale}\n              step={j}\n              onClick={e => this.activateCell(e)}\n            />\n          );\n        }\n        table.push(<tr key={\"row-\" + notes[i] + scale}>{row}</tr>);\n      }\n    }\n    return table;\n  }\n\n  activateCell(e) {\n    const element = e.target;\n    const step = element.getAttribute(\"step\");\n    const note = element.getAttribute(\"note\");\n    const scale = element.getAttribute(\"scale\");\n    const newSequence = [...this.state.sequence];\n\n    //If there is a note for this step, update to store new note,\n    //if note pressed is same as stored update to null,\n    //else store new note in step\n    if (newSequence[step]) {\n      const [stepNote, stepScale] = this.toNoteScaleArr(newSequence[step]);\n      if (note === stepNote && scale === stepScale) {\n        newSequence[step] = null;\n      } else {\n        newSequence[step] = note + scale;\n      }\n    } else {\n      newSequence[step] = note + scale;\n    }\n\n    this.setState(\n      {\n        ...this.state,\n        sequence: newSequence\n      },\n      this.props.updateSynthSequence(newSequence)\n    );\n  }\n\n  clear() {\n    const newSequence = new Array(16).fill(null);\n    this.setState(\n      {\n        ...this.state,\n        sequence: newSequence\n      },\n      this.props.updateSynthSequence(newSequence)\n    );\n  }\n\n  render() {\n    return (\n      <table id={`sequencer-${this.props.idx}`}>\n        <tbody>{this.createTable()}</tbody>\n      </table>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport {\n  CircularInput,\n  CircularTrack,\n  CircularProgress,\n  CircularThumb\n} from \"react-circular-input\";\nimport EnvelopeGraph from \"adsr-envelope-graph\";\nimport Switch from \"react-switch\";\nimport PianoRollComponent from \"./PianoRollComponent\";\nimport \"./SynthComponent.css\";\n\nexport default class SynthComponent extends Component {\n  oscTypes = [\"triangle\", \"sine\", \"square\"];\n\n  state = {\n    id: 0,\n    oscillator: null,\n    envelope: {\n      attack: 0.005,\n      decay: 0.1,\n      sustain: 0.3,\n      release: 1\n    },\n    notes: new Array(16).fill(null),\n    active: false\n  };\n\n  componentDidMount() {\n    this.setState({\n      ...this.state,\n      id: this.props.idx,\n      oscillator: this.props.oscillator,\n      envelope: this.props.envelope,\n      active: this.props.active,\n      synth: this.props.instrument,\n      notes: this.props.notes\n    });\n  }\n\n  updateEnvelope(envKey, newValue) {\n    const newEnvelope = { ...this.state }.envelope;\n    newEnvelope[envKey] = newValue;\n    this.setState(\n      {\n        ...this.state,\n        envelope: newEnvelope\n      },\n      () => {\n        this.updateSynth();\n      }\n    );\n  }\n\n  updateOscillator(newValue) {\n    const newOscillator = { ...this.state }.oscillator;\n    newOscillator.type = newValue.currentTarget.value;\n    this.setState(\n      {\n        ...this.state,\n        oscillator: newOscillator\n      },\n      () => {\n        this.updateSynth();\n      }\n    );\n  }\n\n  updateSynth() {\n    this.props.updateSynth(this.state.id, {\n      envelope: this.state.envelope,\n      oscillator: this.state.oscillator\n    });\n  }\n\n  updateSynthSequence(notes) {\n    this.props.updateSynthSequence(this.state.id, notes);\n  }\n\n  activateSynth() {\n    this.props.activateSynth(this.state.id);\n    this.setState({\n      ...this.state,\n      active: !this.state.active\n    });\n  }\n\n  render() {\n    const { attack, decay, sustain, release } = this.state.envelope;\n    const colors = {\n      attack: \"#ff40fc\",\n      decay: \"#fffc36\",\n      sustain: \"#00fbfe\",\n      release: \"#00f92f\"\n    };\n    const envelopeControls = { attack, decay, sustain, release };\n    return (\n      <div className=\"synth\">\n        {/* Oscillator controls*/}\n        <div className=\"oscillator-controls\">\n          <div className=\"activation-button\">\n            {/* Activate/Deactivate */}\n            <Switch onChange={() => this.activateSynth()} checked={this.state.active} />\n          </div>\n          <div className=\"oscillator-selector\">\n            <label htmlFor=\"oscillator-selector\">WAVE TYPE</label>\n            <select\n              id={`osc-select-${this.state.id}`}\n              name=\"oscillator-selector\"\n              onChange={e => this.updateOscillator(e)}\n            >\n              {this.oscTypes.map(oscType => (\n                <option key={oscType} value={oscType}>\n                  {oscType.toUpperCase()}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Envelope controls*/}\n        <div className=\"envelope-controls\">\n          <EnvelopeGraph\n            a={this.state.envelope.attack}\n            d={this.state.envelope.decay}\n            s={this.state.envelope.sustain}\n            r={this.state.envelope.release}\n            style={{\n              border: \"1px solid #fff\",\n              height: \"100px\",\n              width: \"300px\"\n            }}\n          />\n          <div className=\"envelope-knobs\">\n            {Object.entries(envelopeControls).map((value, idx) => {\n              return (\n                <div key={value[0]} className=\"knob-wrapper\">\n                  <CircularInput\n                    radius={35}\n                    value={value[1]}\n                    onChange={e => this.updateEnvelope(value[0], e)}\n                  >\n                    <CircularTrack strokeWidth={3} />\n                    <CircularProgress\n                      stroke={colors[value[0]]}\n                      strokeWidth={7}\n                    />\n                    <CircularThumb fill={colors[value[0]]} r={9} />\n                  </CircularInput>\n                  <label>{value[0].substring(0, 3).toUpperCase()}</label>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Sequencer */}\n        <div className=\"sequencer-wrapper\">\n          <PianoRollComponent\n            idx={this.state.id}\n            notes={this.props.notes}\n            updateSynthSequence={notes => this.updateSynthSequence(notes)}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport \"./SequencerComponent.css\";\n\nconst notes = {\n  C3: \"KICK\",\n  \"C#3\": \"SNARE\",\n  D3: \"HIHAT\",\n  \"D#3\": \"O.HAT\",\n  E3: \"CRASH\",\n  F3: \"RIDE\",\n  \"F#3\": \"PERC\",\n  key: function(n) {\n    return Object.keys(this)[n];\n  },\n  value: function(n) {\n    return Object.values(this)[n];\n  }\n};\n\nexport default class SequencerComponent extends Component {\n  state = {\n    sequence: this.props.notes\n  };\n\n  toNoteScaleArr(noteScaleStr) {\n    return [\n      noteScaleStr.replace(/[0-9]/g, \"\"),\n      noteScaleStr.replace(/[^0-9]/g, \"\")\n    ];\n  }\n\n  createTable() {\n    const initialScale = 3,\n      toScale = 3,\n      rows = 7,\n      cols = 16;\n    let table = [];\n    table.push(\n      <tr>\n        <td className=\"sequencer-controls\" colSpan={cols}>\n          <button className=\"clear-button\" onClick={() => this.clear()}>\n            CLEAR\n          </button>\n        </td>\n      </tr>\n    );\n    for (let scale = toScale; scale > initialScale - 1; scale--) {\n      for (let i = 0; i < rows; i++) {\n        let row = [];\n        let step = true;\n        row.push(\n          <td key={notes.key(i)} className=\"note-cell\">\n            {notes.value(i)}\n          </td>\n        );\n\n        for (let j = 0; j < cols; j++) {\n          if (j % 4 === 0) step = !step;\n          let classNameString = step ? \"cell-bar--darken\" : \"cell-bar\";\n          if (\n            (!Array.isArray(this.state.sequence[j]) &&\n              this.state.sequence[j] === notes.key(i)) ||\n            (Array.isArray(this.state.sequence[j]) &&\n              this.state.sequence[j].includes(notes.key(i)))\n          ) {\n            classNameString += \" cell-active\";\n          }\n\n          row.push(\n            <td\n              key={notes.key(i) + j}\n              className={classNameString}\n              note={notes.key(i)}\n              step={j}\n              onClick={e => this.activateCell(e)}\n            />\n          );\n        }\n        table.push(<tr key={\"row-\" + notes.key(i) + scale}>{row}</tr>);\n      }\n    }\n    return table;\n  }\n\n  activateCell(e) {\n    const element = e.target;\n    const step = element.getAttribute(\"step\");\n    const note = element.getAttribute(\"note\");\n    const newSequence = [...this.state.sequence];\n\n    if (Array.isArray(newSequence[step])) {\n      if (newSequence[step].includes(note)) {\n        const idx = newSequence[step].indexOf(note);\n        newSequence[step][idx] = null;\n      } else {\n        newSequence[step].push(note);\n      }\n      newSequence[step] = newSequence[step].filter(el => el != null);\n      if (newSequence[step].length === 1) {\n        newSequence[step] = newSequence[step][0];\n      }\n    } else {\n      if (note === newSequence[step]) {\n        newSequence[step] = null;\n      } else {\n        newSequence[step] = newSequence[step]\n          ? [newSequence[step], note]\n          : note;\n      }\n    }\n\n    this.props.updateSynthSequence(newSequence);\n\n    this.setState({\n      ...this.state,\n      sequence: newSequence\n    });\n  }\n\n  clear() {\n    const newSequence = new Array(16).fill(null);\n    this.setState(\n      {\n        ...this.state,\n        sequence: newSequence\n      },\n      this.props.updateSynthSequence(newSequence)\n    );\n  }\n\n  render() {\n    return (\n      <table id={`sampler-sequencer-${this.props.idx}`}>\n        <tbody>{this.createTable()}</tbody>\n      </table>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport Switch from \"react-switch\";\nimport SequencerComponent from \"./SequencerComponent\";\nimport \"./DrumSamplerComponent.css\";\n\nexport default class DrumSamplerComponent extends Component {\n  state = {\n    id: 0,\n    style: \"house\", //default style\n    active: false\n  };\n\n  componentDidMount() {\n    this.setState({\n      ...this.state,\n      id: this.props.idx,\n      active: this.props.active\n    });\n  }\n\n  updateSampler(style) {\n    this.props.updateSampler(this.state.id, style);\n  }\n\n  updateSamplerSequence(notes) {\n    this.props.updateSamplerSequence(this.state.id, notes);\n  }\n\n  activateSampler() {\n    this.props.activateSampler(this.state.id);\n    this.setState({\n      ...this.state,\n      active: !this.state.active\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"sampler\">\n        {/* Activate/Deactivate */}\n        <div className=\"sampler-controls\">\n        <Switch\n          onChange={() => this.activateSampler()}\n          checked={this.state.active}\n        />\n        </div>\n        <div className=\"sequencer-wrapper\">\n          <SequencerComponent\n            idx={this.state.id}\n            notes={this.props.notes}\n            updateSynthSequence={notes => this.updateSamplerSequence(notes)}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport SynthComponent from \"./SynthComponent\";\nimport DrumSamplerComponent from \"./DrumSamplerComponent\";\n\nexport default class CreatorComponent extends Component {\n  renderSynthsSection() {\n    const synths = this.props.getSynths();\n    return synths.map((synth, idx) => (\n      <SynthComponent\n        key={idx}\n        idx={idx}\n        {...synth.instrument}\n        notes={synth.notes}\n        active={synth.active}\n        updateSynth={(idx, props) => this.props.updateSynth(idx, props)}\n        updateSynthSequence={(idx, notes) =>\n          this.props.updateSynthSequence(idx, notes)\n        }\n        activateSynth={() => this.props.activateSynth(idx)}\n      />\n    ));\n  }\n\n  renderSamplerSection() {\n    const samplers = this.props.getSamplers();\n    return samplers.map((sampler, idx) => (\n      <DrumSamplerComponent\n        key={idx}\n        idx={idx}\n        {...sampler}\n        notes={sampler.notes}\n        active={sampler.active}\n        updateSampler={(idx, style) => this.props.updateSampler(idx, style)}\n        updateSamplerSequence={(idx, notes) =>\n          this.props.updateSamplerSequence(idx, notes)\n        }\n        activateSampler={() => this.props.activateSampler(idx)}\n      />\n    ));\n  }\n\n  renderCreationSection() {\n    return (\n      <div id=\"create-app\">\n        <div id=\"instruments-rack\">\n          <div id=\"add-wrapper\">\n            <button onClick={() => this.props.addNewBasicSynth()}>Add Synth</button>\n            <button onClick={() => this.props.addNewSampler()}>Add Sampler</button>\n          </div>\n          {this.renderSynthsSection()}\n          {this.renderSamplerSection()}\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (<div id=\"Creator\">\n        {this.renderCreationSection()}\n    </div>);\n  }\n}\n","import React, { Component } from \"react\";\nimport './LoadComponent.css';\n\nexport default class LoadComponent extends Component {\n  render() {\n    const songs = this.props.userSongs;\n    return (\n      <div id=\"load-screen\">\n        {songs.map(song => {\n          return (\n            <div className=\"song-item\">\n              <h3>{song.name}</h3>\n              <button onClick={() => this.props.loadSongData(song)}>LOAD</button>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nexport default class SaveComponent extends Component {\n  submit(e) {\n    e.preventDefault();\n    this.props.saveSongData(e.target.name.value);\n  }\n  render() {\n    return (\n      <div id=\"save-screen\">\n        <form onSubmit={e => this.submit(e)}>\n          <div className=\"form-logo\">BBRSS</div>\n          <div className=\"input-group\">\n            <label htmlFor=\"name\">NAME:</label>\n            <input name=\"name\" type=\"text\" />\n          </div>\n          <button>SAVE</button>\n        </form>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport Song from \"./classes/Song.class.js\";\nimport ControlsBar from \"./components/ControlsBar\";\nimport VisualizerComponent from \"./components/VisualizerComponent\";\nimport AuthComponent from \"./components/AuthComponent\";\nimport Services from \"./tools/Services\";\nimport CreatorComponent from \"./components/CreatorComponent\";\nimport LoadComponent from \"./components/LoadComponent\";\nimport SaveComponent from \"./components/SaveComponent\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.services = new Services();\n  }\n\n  state = {\n    user: null,\n    song: new Song(),\n    userSongs: [],\n    tempo: 130,\n    isPlaying: false\n  };\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  signup(credentials) {\n    this.services.signup(credentials).then(data => {\n      this.setState({\n        ...this.state,\n        user: data\n      });\n    });\n  }\n\n  login(credentials) {\n    this.services.login(credentials).then(data => {\n      this.setState({\n        ...this.state,\n        user: data\n      });\n    });\n  }\n\n  logout() {\n    this.services.logout().then(data => {\n      this.setState({\n        ...this.state,\n        user: null\n      });\n    });\n  }\n\n  fetchUser() {\n    this.services\n      .isLoggedIn()\n      .then(data => {\n        const user = data;\n        this.services.getUserSongs().then(data => {\n          const newUserSongs = [...this.state.userSongs].concat(data);\n          this.setState({\n            ...this.state,\n            user: user,\n            userSongs: newUserSongs\n          });\n        });\n      })\n      .catch(err => {\n        this.setState({\n          ...this.state,\n          user: null\n        });\n      });\n  }\n\n  //SONG\n  updateSongtempo(newTempo) {\n    const tempo = newTempo;\n    this.state.song.updateTempo(tempo);\n    this.setState({\n      ...this.state,\n      tempo: tempo\n    });\n  }\n\n  play() {\n    this.state.song.play();\n    this.setState({\n      ...this.state,\n      isPlaying: true\n    });\n  }\n\n  stop() {\n    this.state.song.stop();\n    this.setState({\n      ...this.state,\n      isPlaying: false\n    });\n  }\n\n  exportSongData(name) {\n    console.log(this.state.song.exportSongData(name));\n    this.services.saveSong(this.state.song.exportSongData(name)).then(data => {\n      this.fetchUser();\n      this.props.history.push('/creator');\n    });\n  }\n\n  getUserSongs() {\n    this.services.getUserSongs().then(data => {\n      const newUserSongs = [...this.state.userSongs].concat(data);\n      this.setState({\n        ...this.state,\n        userSongs: newUserSongs\n      });\n    });\n  }\n\n  newSong() {\n    this.setState({\n      ...this.state,\n      song: new Song(),\n      tempo: 130,\n      isPlaying: false\n    }, this.props.history.push('/creator'));\n  }\n\n  loadSongData(songData) {\n    this.state.song.stop();\n\n    const newSong = new Song();\n    newSong.updateTempo(songData.tempo);\n\n    const synthsData = songData.instruments.synths;\n    synthsData.forEach((synthData, idx) => {\n      const { oscillator, envelope } = { ...synthData };\n      if (oscillator.oscType) {\n        oscillator.type = oscillator.oscType;\n        delete oscillator.oscType;\n      }\n\n      newSong.addBasicSynth(idx, oscillator.type);\n      newSong.updateSynth(idx, { oscillator, envelope });\n      newSong.updateSynthSequence(idx, synthData.notes);\n    });\n\n    const samplersData = songData.instruments.samplers;\n    samplersData.forEach((samplerData, idx) => {\n      newSong.addSampler(idx, samplerData.style);\n      newSong.updateSamplerSequence(idx, samplerData.notes);\n    });\n\n    this.setState(\n      {\n        ...this.state,\n        song: newSong,\n        tempo: songData.tempo\n      },\n      () => {\n        this.props.history.push(\"/creator\");\n      }\n    );\n  }\n\n  //SYNTHS\n  getSynths() {\n    return this.state.song.getSynths();\n  }\n\n  addNewBasicSynth() {\n    const newSong = { ...this.state.song };\n    newSong.instruments = this.state.song.addBasicSynth(\n      this.state.song.instruments.length\n    );\n    this.setState({\n      ...this.state,\n      song: newSong\n    });\n  }\n\n  updateSynth(idx, props) {\n    const newSong = { ...this.state.song };\n    newSong.instruments = this.state.song.updateSynth(idx, props);\n    this.setState({\n      ...this.state,\n      song: newSong\n    });\n  }\n\n  updateSynthSequence(idx, notes) {\n    this.state.song.updateSynthSequence(idx, notes);\n  }\n\n  activateSynth(idx) {\n    this.state.song.activateSynth(idx);\n  }\n\n  //SAMPLER\n  getSamplers() {\n    return this.state.song.getSamplers();\n  }\n\n  addNewSampler() {\n    const newSong = { ...this.state.song };\n    newSong.instruments = this.state.song.addSampler(\n      this.state.song.instruments.length\n    );\n    this.setState({\n      ...this.state,\n      song: newSong\n    });\n  }\n\n  updateSampler(idx, style) {\n    const newSong = { ...this.state.song };\n    newSong.instruments = this.state.song.updateSampler(idx, style);\n    this.setState({\n      ...this.state,\n      song: newSong\n    });\n  }\n\n  updateSamplerSequence(idx, notes) {\n    this.state.song.updateSamplerSequence(idx, notes);\n  }\n\n  activateSampler(idx) {\n    this.state.song.activateSampler(idx);\n  }\n\n  renderAuthComponent() {\n    return !this.state.user ? (\n      <AuthComponent \n        login={credentials => this.login(credentials)} \n        signup={credentials => this.signup(credentials)} \n      />\n    ) : (\n      <Redirect to=\"/creator\" />\n    );\n  }\n\n  renderCreatorComponent() {\n    return !this.state.user ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <CreatorComponent\n        getSynths={() => this.getSynths()}\n        getSamplers={() => this.getSamplers()}\n        addNewBasicSynth={() => this.addNewBasicSynth()}\n        updateSynth={(idx, props) => this.updateSynth(idx, props)}\n        updateSynthSequence={(idx, notes) =>\n          this.updateSynthSequence(idx, notes)\n        }\n        activateSynth={idx => this.activateSynth(idx)}\n        addNewSampler={() => this.addNewSampler()}\n        updateSampler={(idx, style) => this.updateSampler(idx, style)}\n        updateSamplerSequence={(idx, notes) =>\n          this.updateSamplerSequence(idx, notes)\n        }\n        activateSampler={idx => this.activateSampler(idx)}\n      />\n    );\n  }\n\n  renderVisualizerComponent() {\n    return !this.state.user ? <Redirect to=\"/\" /> : <VisualizerComponent />;\n  }\n\n  renderLoadComponent() {\n    return !this.state.user ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <LoadComponent\n        userSongs={this.state.userSongs}\n        loadSongData={songData => this.loadSongData(songData)}\n      />\n    );\n  }\n\n  renderSaveComponent() {\n    return !this.state.user ? (\n      <Redirect to=\"/\" />\n    ) : (\n      <SaveComponent saveSongData={name => this.exportSongData(name)} />\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ControlsBar\n          user={this.state.user}\n          logout={() => this.logout()}\n          isPlaying={this.state.isPlaying}\n          tempo={this.state.tempo}\n          play={() => this.play()}\n          stop={() => this.stop()}\n          newSong={() => this.newSong()}\n          exportSongData={() => this.exportSongData()}\n          updateSongTempo={newTempo => this.updateSongtempo(newTempo)}\n        />\n        <Switch>\n          <Route exact path=\"/\" render={() => this.renderAuthComponent()} />\n          <Route\n            path=\"/visualizer\"\n            render={() => this.renderVisualizerComponent()}\n          />\n          <Route\n            path=\"/creator\"\n            render={() => {\n              return this.renderCreatorComponent();\n            }}\n          />\n          <Route\n            path=\"/load\"\n            render={() => {\n              return this.renderLoadComponent();\n            }}\n          />\n          <Route\n            path=\"/save\"\n            render={() => {\n              return this.renderSaveComponent();\n            }}\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {BrowserRouter as Router} from \"react-router-dom\"\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}