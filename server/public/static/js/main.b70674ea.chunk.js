(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,n){e.exports=n(246)},135:function(e,t,n){},136:function(e,t,n){},139:function(e,t,n){},146:function(e,t,n){},168:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(123),i=n.n(r),c=n(29),o=(n(135),n(19)),u=n(1),l=n(3),p=n(9),h=n(7),m=n(6),d=n(8),v=n(32),f=(n(136),n(10)),S=n.n(f),y=function e(t){var n=this;Object(l.a)(this,e),this.activateInstrument=function(){n.active?n.sequence&&(n.sequence.mute=!0):n.sequence&&(n.sequence.mute=!1),n.active=!n.active},this.updateSequence=function(e){n.notes=e,n.sequence&&0!==e.length?e.forEach(function(e,t){n.sequence.remove(t),n.sequence.add(t,e)}):n.sequence=new S.a.Sequence(function(e,t){n.instrument&&n.instrument.triggerAttackRelease(t,"10hz",e)},e,"16n"),n.active?n.sequence.mute=!1:n.sequence.mute=!0},this.id=t,this.instrument=null,this.sequence=null,this.active=!1,this.notes=new Array(16).fill(null)},b=function(e){function t(e,n){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).updateInstrument=function(e){return a.instrument.oscillator.type=e.oscillator.type,a.instrument.envelope.attack=e.envelope.attack,a.instrument.envelope.decay=e.envelope.decay,a.instrument.envelope.sustain=e.envelope.sustain,a.instrument.envelope.release=e.envelope.release,a.instrument},a.getSynthData=function(){return{notes:a.notes,oscillator:{oscType:a.instrument.oscillator.type},envelope:{attack:a.instrument.envelope.attack,decay:a.instrument.envelope.decay,sustain:a.instrument.envelope.sustain,release:a.instrument.envelope.release}}},a.instrument=new S.a.Synth(n).toMaster(),a}return Object(d.a)(t,e),t}(y),g=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"house";return Object(l.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).updateInstrument=function(e){n.preload(e)},n.preload=function(e){var t=new S.a.Sampler({C3:"".concat(e,"/kick.wav"),"C#3":"".concat(e,"/snare.wav"),D3:"".concat(e,"/hihat.wav"),"D#3":"".concat(e,"/openhihat.wav"),E3:"".concat(e,"/crash.wav"),F3:"".concat(e,"/ride.wav"),"F#3":"".concat(e,"/perc.wav")},function(){n.loaded=!0,n.instrument=t.toMaster()},"./samples/")},n.getSamplerData=function(){return{notes:n.notes,style:n.style}},n.style=a,n.loaded=!1,n.preload(a),n}return Object(d.a)(t,e),t}(y),E=function e(){var t=this;Object(l.a)(this,e),this.init=function(){console.log("init"),S.a.Transport.cancel(),S.a.Transport.bpm.value=t.tempo},this.play=function(){console.log("playing..."),"stopped"===S.a.Transport.state&&(S.a.Transport.start(),t.playInstruments())},this.stop=function(){console.log("stopped"),"started"===S.a.Transport.state&&S.a.Transport.stop()},this.updateTempo=function(e){t.tempo=e,S.a.Transport.bpm.value=t.tempo},this.addBasicSynth=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triangle";return t.instruments.synths.push(new b(e,n)),t.getSynths()},this.getSynths=function(){return t.instruments.synths},this.getSynth=function(e){return t.instruments.synths[e]},this.updateSynth=function(e,n){return t.instruments.synths[e].updateInstrument(n)},this.updateSynthSequence=function(e,n){t.instruments.synths[e].updateSequence(n)},this.activateSynth=function(e){t.instruments.synths[e].activateInstrument()},this.addSampler=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"house";return t.instruments.samplers.push(new g(e,n)),t.getSamplers()},this.getSamplers=function(){return t.instruments.samplers},this.getSampler=function(e){return t.instruments.samplers[e]},this.updateSampler=function(e,n){return t.instruments.samplers[e].updateInstrument(n)},this.updateSamplerSequence=function(e,n){t.instruments.samplers[e].updateSequence(n)},this.activateSampler=function(e){t.instruments.samplers[e].activateInstrument()},this.playInstruments=function(){t.instruments.synths.concat(t.instruments.samplers).forEach(function(e){S.a.Transport.schedule(function(t){e&&e.sequence&&e.sequence.start()},"0:0")})},this.exportSongData=function(e){var n=Object(o.a)(t.instruments.synths).map(function(e){return e.getSynthData()}),a=Object(o.a)(t.instruments.samplers).map(function(e){return e.getSamplerData()});return{name:e,tempo:t.tempo,instruments:{synths:n,samplers:a}}},this.tempo=130,this.instruments={synths:[],samplers:[]},this.init()},O=n(124),k=n.n(O),j=(n(139),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=s.a.createElement("button",{className:"play-btn",onClick:function(){return e.props.play()}},"Play");return this.props.isPlaying&&(t=s.a.createElement("button",{className:"stop-btn",onClick:function(){return e.props.stop()}},"Stop")),this.props.user?s.a.createElement("div",{id:"controls-bar"},s.a.createElement("div",{id:"tempo-wrapper"},s.a.createElement(k.a,{min:70,max:160,step:1,value:this.props.tempo,format:function(e){return"BPM: "+e},parse:function(e){return e.replace("BPM: ","")},onChange:function(t){return e.props.updateSongTempo(t)}})),s.a.createElement("div",{id:"navigation"},s.a.createElement(c.b,{to:"/creator"},s.a.createElement("button",null,"CREATION MODE")),s.a.createElement(c.b,{to:"/visualizer"},s.a.createElement("button",null,"VISUALIZATION MODE"))),s.a.createElement("div",{id:"song-controls"},t,s.a.createElement("button",{onClick:function(){return e.props.newSong()}},"NEW"),s.a.createElement(c.b,{to:"/load"},s.a.createElement("button",null,"LOAD")),s.a.createElement(c.b,{to:"/save"},s.a.createElement("button",null,"SAVE"))),s.a.createElement("div",{id:"auth-controls"},s.a.createElement("button",{onClick:function(){return e.props.logout()}},"LOGOUT"))):s.a.createElement("div",{id:"controls-bar"})}}]),t}(a.Component)),w=(n(146),n(16)),C=n(78)(w),q=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={epilepsyMode:!1},e.toggleEpilepsyMode=function(){console.log(!e.state.epilepsyMode),e.setState(Object(u.a)({},e.state,{epilepsyMode:!e.state.epilepsyMode}))},e.createSphere=function(){var e=new w.SphereGeometry(70,16,16),t=new w.MeshBasicMaterial({color:16777215,wireframe:!0}),n=new w.Mesh(e,t);return n.position.x=0,n.position.z=0,n},e.createCube=function(e,t){var n=new w.BoxGeometry(10,10,10),a=new w.MeshBasicMaterial({color:16777215,wireframe:!0}),s=new w.Mesh(n,a);return s.position.x=e,s.position.z=t,s},e.animateSphere=function(t,n){e.state.epilepsyMode?t>20&&e.iteration%n!==0?e.sphere.scale.set(t/500,t/500,t/500):e.sphere.scale.set(16,16,16):t>20?e.sphere.scale.set(t/500,t/500,t/500):e.sphere.scale.set(1,1,1),e.sphere.rotation.y+=.1,e.renderer&&e.renderer.render(e.scene,e.camera)},e.animateCube=function(t,n,a){e.state.epilepsyMode?n>10&&e.iteration%a!==0?e.cubes[t].scale.set(n/100,n/100,n/100):e.cubes[t].scale.set(16,16,16):n>10?e.cubes[t].scale.set(n/100,n/100,n/100):e.cubes[t].scale.set(.1,.1,.1),t%2===0?e.cubes[t].rotation.z+=.1:e.cubes[t].rotation.z-=.1,e.renderer&&e.renderer.render(e.scene,e.camera)},e.draw=function(){var t=Math.abs(e.analyser.getValue()[0]),n=Math.abs(e.analyser.getValue()[15]);e.animateSphere(t,8),e.cubes.forEach(function(t,a){return e.animateCube(a,n,8)}),e.iteration>8?e.iteration=1:e.iteration++,requestAnimationFrame(e.draw)},e.analyser=new S.a.Analyser("fft",16),e.scene=null,e.camera=null,e.renderer=null,e.sphere=null,e.cubes=[],e.controls=n(78)(w),e.iteration=0,S.a.Master.connect(e.analyser),e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=window.innerWidth,t=window.innerHeight;this.scene=new w.Scene,this.camera=new w.PerspectiveCamera(15,e/t,1,1e3),this.camera.position.set(0,600,0),this.scene.add(this.camera),this.renderer=new w.WebGLRenderer,this.renderer.setSize(e,t),document.querySelector("#visualizer-wrapper").appendChild(this.renderer.domElement),this.controls=new C(this.camera,this.renderer.domElement);var n=this.createSphere();this.scene.add(n),this.sphere=n;var a=this.createCube(-50,-50);this.scene.add(a),this.cubes.push(a);var s=this.createCube(50,-50);this.scene.add(s),this.cubes.push(s);var r=this.createCube(-50,50);this.scene.add(r),this.cubes.push(r);var i=this.createCube(50,50);this.scene.add(i),this.cubes.push(i),this.renderer.render(this.scene,this.camera),this.draw()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"visualizer-wrapper"},s.a.createElement("button",{id:"epilepsy-mode-button",className:this.state.epilepsyMode?"btn-on":"btn-off",onClick:function(){return e.toggleEpilepsyMode()}},"EPILEPSY MODE: ",this.state.epilepsyMode?"ON":"OFF")))}}]),t}(a.Component),N=n(127),A=n.n(N);n(165).config();var D=function e(){var t=this;Object(l.a)(this,e),this.login=function(e){return t.service.post("/auth/login",e).then(function(e){return e.data})},this.signup=function(e){return t.service.post("/auth/signup",e).then(function(e){return e.data})},this.logout=function(){return t.service.get("auth/logout").then(function(e){return e.data})},this.isLoggedIn=function(){return t.service.get("/auth/loggedin").then(function(e){return e.data})},this.saveSong=function(e){return t.service.post("/song/create",e).then(function(e){return e.data}).catch(function(e){return e})},this.getUserSongs=function(e){return t.service.get("/song/mySongs").then(function(e){return e.data}).catch(function(e){return e})},this.service=A.a.create({baseURL:"https://bbrss.herokuapp.com/",withCredentials:!0})},T=(n(168),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={signup:!1,errors:null},e.services=new D,e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toggleSignup",value:function(){this.setState(Object(u.a)({},this.state,{signup:!this.state.signup}))}},{key:"submit",value:function(e){e.preventDefault();var t=e.target.username.value,n=e.target.password.value;this.state.signup?(n!==e.target.secondPassword.value&&this.setState(Object(u.a)({},this.state,{errors:"PASSWORDS DON'T MATCH"})),this.props.signup({username:t,password:n})):this.props.login({username:t,password:n})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"auth-form"},s.a.createElement("form",{onSubmit:function(t){return e.submit(t)}},s.a.createElement("div",{className:"form-logo"},"BBRSS"),s.a.createElement("div",{className:"input-group"},s.a.createElement("label",{htmlFor:"username"},"USERNAME:"),s.a.createElement("input",{name:"username",type:"text"})),s.a.createElement("div",{className:"input-group"},s.a.createElement("label",{htmlFor:"password"},"PASSWORD:"),s.a.createElement("input",{name:"password",type:"password"})),this.state.signup?s.a.createElement("div",{className:"input-group"},s.a.createElement("label",{htmlFor:"secondPassword"},"REPEAT PASSWORD:"),s.a.createElement("input",{name:"secondPassword",type:"password"})):null,s.a.createElement("div",null,s.a.createElement("a",{onClick:function(){return e.toggleSignup()}},"NEW? SIGN UP")),this.state.errors?s.a.createElement("div",{className:"form-errors"},s.a.createElement("span",null,this.state.errors)):null,s.a.createElement("button",null,this.state.signup?"SIGN UP":"LOG IN")))}}]),t}(a.Component)),M=n(26),x=n(128),P=n.n(x),I=n(51),B=n.n(I),R=n(129),U=(n(239),["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"]),F=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={id:n.props.idx,sequence:n.props.notes},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toNoteScaleArr",value:function(e){return[e.replace(/[0-9]/g,""),e.replace(/[^0-9]/g,"")]}},{key:"createTable",value:function(){var e=this,t=[];t.push(s.a.createElement("tr",null,s.a.createElement("td",{className:"sequencer-controls",colSpan:16},s.a.createElement("button",{className:"clear-button",onClick:function(){return e.clear()}},"CLEAR"))));for(var n=4;n>2;n--)for(var a=0;a<12;a++){var r=[],i=!0;r.push(s.a.createElement("td",{key:U[a]+n,className:"note-cell"},U[a]+n));for(var c=0;c<16;c++){c%4===0&&(i=!i);var o=i?"cell-bar--darken":"cell-bar",u=this.state.sequence[c];if(u){var l=this.toNoteScaleArr(u);U[a]===l[0]&&n===+l[1]&&(o+=" cell-active")}r.push(s.a.createElement("td",{key:U[a]+n+c,className:o,note:U[a],scale:n,step:c,onClick:function(t){return e.activateCell(t)}}))}t.push(s.a.createElement("tr",{key:"row-"+U[a]+n},r))}return t}},{key:"activateCell",value:function(e){var t=e.target,n=t.getAttribute("step"),a=t.getAttribute("note"),s=t.getAttribute("scale"),r=Object(o.a)(this.state.sequence);if(r[n]){var i=this.toNoteScaleArr(r[n]),c=Object(R.a)(i,2),l=c[0],p=c[1];r[n]=a===l&&s===p?null:a+s}else r[n]=a+s;this.setState(Object(u.a)({},this.state,{sequence:r}),this.props.updateSynthSequence(r))}},{key:"clear",value:function(){var e=new Array(16).fill(null);this.setState(Object(u.a)({},this.state,{sequence:e}),this.props.updateSynthSequence(e))}},{key:"render",value:function(){return s.a.createElement("table",{id:"sequencer-".concat(this.props.idx)},s.a.createElement("tbody",null,this.createTable()))}}]),t}(a.Component),L=(n(240),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).oscTypes=["triangle","sine","square"],n.state={id:0,oscillator:null,envelope:{attack:.005,decay:.1,sustain:.3,release:1},notes:new Array(16).fill(null),active:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(u.a)({},this.state,{id:this.props.idx,oscillator:this.props.oscillator,envelope:this.props.envelope,active:this.props.active,synth:this.props.instrument,notes:this.props.notes}))}},{key:"updateEnvelope",value:function(e,t){var n=this,a=Object(u.a)({},this.state).envelope;a[e]=t,this.setState(Object(u.a)({},this.state,{envelope:a}),function(){n.updateSynth()})}},{key:"updateOscillator",value:function(e){var t=this,n=Object(u.a)({},this.state).oscillator;n.type=e.currentTarget.value,this.setState(Object(u.a)({},this.state,{oscillator:n}),function(){t.updateSynth()})}},{key:"updateSynth",value:function(){this.props.updateSynth(this.state.id,{envelope:this.state.envelope,oscillator:this.state.oscillator})}},{key:"updateSynthSequence",value:function(e){this.props.updateSynthSequence(this.state.id,e)}},{key:"activateSynth",value:function(){this.props.activateSynth(this.state.id),this.setState(Object(u.a)({},this.state,{active:!this.state.active}))}},{key:"render",value:function(){var e=this,t=this.state.envelope,n=t.attack,a=t.decay,r=t.sustain,i=t.release,c={attack:"#ff40fc",decay:"#fffc36",sustain:"#00fbfe",release:"#00f92f"},o={attack:n,decay:a,sustain:r,release:i};return s.a.createElement("div",{className:"synth"},s.a.createElement("div",{className:"oscillator-controls"},s.a.createElement("div",{className:"activation-button"},s.a.createElement(B.a,{onChange:function(){return e.activateSynth()},checked:this.state.active})),s.a.createElement("div",{className:"oscillator-selector"},s.a.createElement("label",{htmlFor:"oscillator-selector"},"WAVE TYPE"),s.a.createElement("select",{id:"osc-select-".concat(this.state.id),name:"oscillator-selector",onChange:function(t){return e.updateOscillator(t)}},this.oscTypes.map(function(e){return s.a.createElement("option",{key:e,value:e},e.toUpperCase())})))),s.a.createElement("div",{className:"envelope-controls"},s.a.createElement(P.a,{a:this.state.envelope.attack,d:this.state.envelope.decay,s:this.state.envelope.sustain,r:this.state.envelope.release,style:{border:"1px solid #fff",height:"100px",width:"300px"}}),s.a.createElement("div",{className:"envelope-knobs"},Object.entries(o).map(function(t,n){return s.a.createElement("div",{key:t[0],className:"knob-wrapper"},s.a.createElement(M.CircularInput,{radius:35,value:t[1],onChange:function(n){return e.updateEnvelope(t[0],n)}},s.a.createElement(M.CircularTrack,{strokeWidth:3}),s.a.createElement(M.CircularProgress,{stroke:c[t[0]],strokeWidth:7}),s.a.createElement(M.CircularThumb,{fill:c[t[0]],r:9})),s.a.createElement("label",null,t[0].substring(0,3).toUpperCase()))}))),s.a.createElement("div",{className:"sequencer-wrapper"},s.a.createElement(F,{idx:this.state.id,notes:this.props.notes,updateSynthSequence:function(t){return e.updateSynthSequence(t)}})))}}]),t}(a.Component)),z=(n(242),{C3:"KICK","C#3":"SNARE",D3:"HIHAT","D#3":"O.HAT",E3:"CRASH",F3:"RIDE","F#3":"PERC",key:function(e){return Object.keys(this)[e]},value:function(e){return Object.values(this)[e]}}),W=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={sequence:n.props.notes},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"toNoteScaleArr",value:function(e){return[e.replace(/[0-9]/g,""),e.replace(/[^0-9]/g,"")]}},{key:"createTable",value:function(){var e=this,t=[];t.push(s.a.createElement("tr",null,s.a.createElement("td",{className:"sequencer-controls",colSpan:16},s.a.createElement("button",{className:"clear-button",onClick:function(){return e.clear()}},"CLEAR"))));for(var n=3;n>2;n--)for(var a=0;a<7;a++){var r=[],i=!0;r.push(s.a.createElement("td",{key:z.key(a),className:"note-cell"},z.value(a)));for(var c=0;c<16;c++){c%4===0&&(i=!i);var o=i?"cell-bar--darken":"cell-bar";(!Array.isArray(this.state.sequence[c])&&this.state.sequence[c]===z.key(a)||Array.isArray(this.state.sequence[c])&&this.state.sequence[c].includes(z.key(a)))&&(o+=" cell-active"),r.push(s.a.createElement("td",{key:z.key(a)+c,className:o,note:z.key(a),step:c,onClick:function(t){return e.activateCell(t)}}))}t.push(s.a.createElement("tr",{key:"row-"+z.key(a)+n},r))}return t}},{key:"activateCell",value:function(e){var t=e.target,n=t.getAttribute("step"),a=t.getAttribute("note"),s=Object(o.a)(this.state.sequence);if(Array.isArray(s[n])){if(s[n].includes(a)){var r=s[n].indexOf(a);s[n][r]=null}else s[n].push(a);s[n]=s[n].filter(function(e){return null!=e}),1===s[n].length&&(s[n]=s[n][0])}else a===s[n]?s[n]=null:s[n]=s[n]?[s[n],a]:a;this.props.updateSynthSequence(s),this.setState(Object(u.a)({},this.state,{sequence:s}))}},{key:"clear",value:function(){var e=new Array(16).fill(null);this.setState(Object(u.a)({},this.state,{sequence:e}),this.props.updateSynthSequence(e))}},{key:"render",value:function(){return s.a.createElement("table",{id:"sampler-sequencer-".concat(this.props.idx)},s.a.createElement("tbody",null,this.createTable()))}}]),t}(a.Component),G=(n(243),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={id:0,style:"house",active:!1},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(u.a)({},this.state,{id:this.props.idx,active:this.props.active}))}},{key:"updateSampler",value:function(e){this.props.updateSampler(this.state.id,e)}},{key:"updateSamplerSequence",value:function(e){this.props.updateSamplerSequence(this.state.id,e)}},{key:"activateSampler",value:function(){this.props.activateSampler(this.state.id),this.setState(Object(u.a)({},this.state,{active:!this.state.active}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"sampler"},s.a.createElement("div",{className:"sampler-controls"},s.a.createElement(B.a,{onChange:function(){return e.activateSampler()},checked:this.state.active})),s.a.createElement("div",{className:"sequencer-wrapper"},s.a.createElement(W,{idx:this.state.id,notes:this.props.notes,updateSynthSequence:function(t){return e.updateSamplerSequence(t)}})))}}]),t}(a.Component)),V=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderSynthsSection",value:function(){var e=this;return this.props.getSynths().map(function(t,n){return s.a.createElement(L,Object.assign({key:n,idx:n},t.instrument,{notes:t.notes,active:t.active,updateSynth:function(t,n){return e.props.updateSynth(t,n)},updateSynthSequence:function(t,n){return e.props.updateSynthSequence(t,n)},activateSynth:function(){return e.props.activateSynth(n)}}))})}},{key:"renderSamplerSection",value:function(){var e=this;return this.props.getSamplers().map(function(t,n){return s.a.createElement(G,Object.assign({key:n,idx:n},t,{notes:t.notes,active:t.active,updateSampler:function(t,n){return e.props.updateSampler(t,n)},updateSamplerSequence:function(t,n){return e.props.updateSamplerSequence(t,n)},activateSampler:function(){return e.props.activateSampler(n)}}))})}},{key:"renderCreationSection",value:function(){var e=this;return s.a.createElement("div",{id:"create-app"},s.a.createElement("div",{id:"instruments-rack"},s.a.createElement("div",{id:"add-wrapper"},s.a.createElement("button",{onClick:function(){return e.props.addNewBasicSynth()}},"Add Synth"),s.a.createElement("button",{onClick:function(){return e.props.addNewSampler()}},"Add Sampler")),this.renderSynthsSection(),this.renderSamplerSection()))}},{key:"render",value:function(){return s.a.createElement("div",{id:"Creator"},this.renderCreationSection())}}]),t}(a.Component),H=(n(244),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.userSongs;return s.a.createElement("div",{id:"load-screen"},t.map(function(t){return s.a.createElement("div",{className:"song-item"},s.a.createElement("h3",null,t.name),s.a.createElement("button",{onClick:function(){return e.props.loadSongData(t)}},"LOAD"))}))}}]),t}(a.Component)),J=(n(245),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"submit",value:function(e){e.preventDefault(),this.props.saveSongData(e.target.name.value)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"save-screen"},s.a.createElement("form",{onSubmit:function(t){return e.submit(t)}},s.a.createElement("div",{className:"form-logo"},"BBRSS"),s.a.createElement("div",{className:"input-group"},s.a.createElement("label",{htmlFor:"name"},"SONG NAME:"),s.a.createElement("input",{name:"name",type:"text"})),s.a.createElement("button",null,"SAVE")))}}]),t}(a.Component)),K=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(m.a)(t).call(this))).state={user:null,song:new E,userSongs:[],tempo:130,isPlaying:!1},e.services=new D,e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"signup",value:function(e){var t=this;this.services.signup(e).then(function(e){t.setState(Object(u.a)({},t.state,{user:e}))})}},{key:"login",value:function(e){var t=this;this.services.login(e).then(function(e){var n=e;t.services.getUserSongs().then(function(e){var a=Object(o.a)(t.state.userSongs).concat(e);t.setState(Object(u.a)({},t.state,{user:n,userSongs:a}))})})}},{key:"logout",value:function(){var e=this;this.services.logout().then(function(t){e.setState(Object(u.a)({},e.state,{user:null}))})}},{key:"fetchUser",value:function(){var e=this;this.services.isLoggedIn().then(function(t){var n=t;e.services.getUserSongs().then(function(t){var a=Object(o.a)(e.state.userSongs).concat(t);e.setState(Object(u.a)({},e.state,{user:n,userSongs:a}))})}).catch(function(t){e.setState(Object(u.a)({},e.state,{user:null}))})}},{key:"updateSongtempo",value:function(e){var t=e;this.state.song.updateTempo(t),this.setState(Object(u.a)({},this.state,{tempo:t}))}},{key:"play",value:function(){this.state.song.play(),this.setState(Object(u.a)({},this.state,{isPlaying:!0}))}},{key:"stop",value:function(){this.state.song.stop(),this.setState(Object(u.a)({},this.state,{isPlaying:!1}))}},{key:"exportSongData",value:function(e){var t=this;console.log(this.state.song.exportSongData(e)),this.services.saveSong(this.state.song.exportSongData(e)).then(function(e){t.fetchUser(),t.props.history.push("/creator")})}},{key:"getUserSongs",value:function(){var e=this;this.services.getUserSongs().then(function(t){var n=Object(o.a)(e.state.userSongs).concat(t);e.setState(Object(u.a)({},e.state,{userSongs:n}))})}},{key:"newSong",value:function(){this.setState(Object(u.a)({},this.state,{song:new E,tempo:130,isPlaying:!1}),this.props.history.push("/creator"))}},{key:"loadSongData",value:function(e){var t=this;this.state.song.stop();var n=new E;n.updateTempo(e.tempo),e.instruments.synths.forEach(function(e,t){var a=Object(u.a)({},e),s=a.oscillator,r=a.envelope;s.oscType&&(s.type=s.oscType,delete s.oscType),n.addBasicSynth(t,s.type),n.updateSynth(t,{oscillator:s,envelope:r}),n.updateSynthSequence(t,e.notes)}),e.instruments.samplers.forEach(function(e,t){n.addSampler(t,e.style),n.updateSamplerSequence(t,e.notes)}),this.setState(Object(u.a)({},this.state,{song:n,tempo:e.tempo}),function(){t.props.history.push("/creator")})}},{key:"getSynths",value:function(){return this.state.song.getSynths()}},{key:"addNewBasicSynth",value:function(){var e=Object(u.a)({},this.state.song);e.instruments=this.state.song.addBasicSynth(this.state.song.instruments.length),this.setState(Object(u.a)({},this.state,{song:e}))}},{key:"updateSynth",value:function(e,t){var n=Object(u.a)({},this.state.song);n.instruments=this.state.song.updateSynth(e,t),this.setState(Object(u.a)({},this.state,{song:n}))}},{key:"updateSynthSequence",value:function(e,t){this.state.song.updateSynthSequence(e,t)}},{key:"activateSynth",value:function(e){this.state.song.activateSynth(e)}},{key:"getSamplers",value:function(){return this.state.song.getSamplers()}},{key:"addNewSampler",value:function(){var e=Object(u.a)({},this.state.song);e.instruments=this.state.song.addSampler(this.state.song.instruments.length),this.setState(Object(u.a)({},this.state,{song:e}))}},{key:"updateSampler",value:function(e,t){var n=Object(u.a)({},this.state.song);n.instruments=this.state.song.updateSampler(e,t),this.setState(Object(u.a)({},this.state,{song:n}))}},{key:"updateSamplerSequence",value:function(e,t){this.state.song.updateSamplerSequence(e,t)}},{key:"activateSampler",value:function(e){this.state.song.activateSampler(e)}},{key:"renderAuthComponent",value:function(){var e=this;return this.state.user?s.a.createElement(v.a,{to:"/creator"}):s.a.createElement(T,{login:function(t){return e.login(t)},signup:function(t){return e.signup(t)}})}},{key:"renderCreatorComponent",value:function(){var e=this;return this.state.user?s.a.createElement(V,{getSynths:function(){return e.getSynths()},getSamplers:function(){return e.getSamplers()},addNewBasicSynth:function(){return e.addNewBasicSynth()},updateSynth:function(t,n){return e.updateSynth(t,n)},updateSynthSequence:function(t,n){return e.updateSynthSequence(t,n)},activateSynth:function(t){return e.activateSynth(t)},addNewSampler:function(){return e.addNewSampler()},updateSampler:function(t,n){return e.updateSampler(t,n)},updateSamplerSequence:function(t,n){return e.updateSamplerSequence(t,n)},activateSampler:function(t){return e.activateSampler(t)}}):s.a.createElement(v.a,{to:"/"})}},{key:"renderVisualizerComponent",value:function(){return this.state.user?s.a.createElement(q,null):s.a.createElement(v.a,{to:"/"})}},{key:"renderLoadComponent",value:function(){var e=this;return this.state.user?s.a.createElement(H,{userSongs:this.state.userSongs,loadSongData:function(t){return e.loadSongData(t)}}):s.a.createElement(v.a,{to:"/"})}},{key:"renderSaveComponent",value:function(){var e=this;return this.state.user?s.a.createElement(J,{saveSongData:function(t){return e.exportSongData(t)}}):s.a.createElement(v.a,{to:"/"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(j,{user:this.state.user,logout:function(){return e.logout()},isPlaying:this.state.isPlaying,tempo:this.state.tempo,play:function(){return e.play()},stop:function(){return e.stop()},newSong:function(){return e.newSong()},exportSongData:function(){return e.exportSongData()},updateSongTempo:function(t){return e.updateSongtempo(t)}}),s.a.createElement(v.d,null,s.a.createElement(v.b,{exact:!0,path:"/",render:function(){return e.renderAuthComponent()}}),s.a.createElement(v.b,{path:"/visualizer",render:function(){return e.renderVisualizerComponent()}}),s.a.createElement(v.b,{path:"/creator",render:function(){return e.renderCreatorComponent()}}),s.a.createElement(v.b,{path:"/load",render:function(){return e.renderLoadComponent()}}),s.a.createElement(v.b,{path:"/save",render:function(){return e.renderSaveComponent()}})))}}]),t}(s.a.Component),Y=Object(v.f)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(c.a,null,s.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[130,1,2]]]);
//# sourceMappingURL=main.b70674ea.chunk.js.map